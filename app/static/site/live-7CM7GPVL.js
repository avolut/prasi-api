import{a as Kt,b as T,c as _e,d as L,g as pn,i as Uc,k as Xt,l as Fi,m as hn,o as _t,p as kt,q as gr,r as ji}from"./chunk-GK4B4SLD.js";var $i=Kt((ke,gn)=>{(function(e,t){"use strict";var n="1.0.35",r="",i="?",o="function",s="undefined",c="object",l="string",f="major",a="model",u="name",d="type",p="vendor",h="version",g="architecture",S="console",x="mobile",m="tablet",k="smarttv",w="wearable",y="embedded",C=350,b="Amazon",tt="Apple",ye="ASUS",Ui="BlackBerry",Ht="Browser",sn="Chrome",Cc="Edge",cn="Firefox",an="Google",Ti="Huawei",cr="LG",ar="Microsoft",Di="Motorola",ln="Opera",lr="Samsung",Ni="Sharp",dn="Sony",hu="Viera",dr="Xiaomi",ur="Zebra",Oi="Facebook",Mi="Chromium OS",Li="Mac OS",Ec=function(A,N){var v={};for(var O in A)N[O]&&N[O].length%2===0?v[O]=N[O].concat(A[O]):v[O]=A[O];return v},un=function(A){for(var N={},v=0;v<A.length;v++)N[A[v].toUpperCase()]=A[v];return N},Ri=function(A,N){return typeof A===l?be(N).indexOf(be(A))!==-1:!1},be=function(A){return A.toLowerCase()},Ic=function(A){return typeof A===l?A.replace(/[^\d\.]/g,r).split(".")[0]:t},fr=function(A,N){if(typeof A===l)return A=A.replace(/^\s\s*/,r),typeof N===s?A:A.substring(0,C)},xe=function(A,N){for(var v=0,O,xt,it,D,_,ot;v<N.length&&!_;){var hr=N[v],Vi=N[v+1];for(O=xt=0;O<hr.length&&!_&&hr[O];)if(_=hr[O++].exec(A),_)for(it=0;it<Vi.length;it++)ot=_[++xt],D=Vi[it],typeof D===c&&D.length>0?D.length===2?typeof D[1]==o?this[D[0]]=D[1].call(this,ot):this[D[0]]=D[1]:D.length===3?typeof D[1]===o&&!(D[1].exec&&D[1].test)?this[D[0]]=ot?D[1].call(this,ot,D[2]):t:this[D[0]]=ot?ot.replace(D[1],D[2]):t:D.length===4&&(this[D[0]]=ot?D[3].call(this,ot.replace(D[1],D[2])):t):this[D]=ot||t;v+=2}},pr=function(A,N){for(var v in N)if(typeof N[v]===c&&N[v].length>0){for(var O=0;O<N[v].length;O++)if(Ri(N[v][O],A))return v===i?t:v}else if(Ri(N[v],A))return v===i?t:v;return A},Ac={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Bi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Pi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,h],[/opios[\/ ]+([\w\.]+)/i],[h,[u,ln+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[u,ln]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[u,"UC"+Ht]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+Ht],h],[/\bfocus\/([\w\.]+)/i],[h,[u,cn+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[u,ln+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[u,ln+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[u,"MIUI "+Ht]],[/fxios\/([-\w\.]+)/i],[h,[u,cn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+Ht]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+Ht],h],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,Oi],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[u,sn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,sn+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[u,"Android "+Ht]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[h,pr,Ac]],[/(webkit|khtml)\/([\w\.]+)/i],[u,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[u,cn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,h],[/(cobalt)\/([\w\.]+)/i],[u,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,be]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,r,be]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,be]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[p,lr],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[p,lr],[d,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[a,[p,tt],[d,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[p,tt],[d,m]],[/(macintosh);/i],[a,[p,tt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[p,Ni],[d,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[p,Ti],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[p,Ti],[d,x]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[p,dr],[d,x]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[p,dr],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[p,"OPPO"],[d,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[p,"Vivo"],[d,x]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[p,"Realme"],[d,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[p,Di],[d,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[p,Di],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[p,cr],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[p,cr],[d,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[p,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[p,"Nokia"],[d,x]],[/(pixel c)\b/i],[a,[p,an],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[p,an],[d,x]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[p,dn],[d,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[p,dn],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[p,"OnePlus"],[d,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[p,b],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[p,b],[d,x]],[/(playbook);[-\w\),; ]+(rim)/i],[a,p,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[p,Ui],[d,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[p,ye],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[p,ye],[d,x]],[/(nexus 9)/i],[a,[p,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[a,/_/g," "],[d,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[p,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[p,"Meizu"],[d,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,a,[d,x]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,a,[d,m]],[/(surface duo)/i],[a,[p,ar],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[p,"Fairphone"],[d,x]],[/(u304aa)/i],[a,[p,"AT&T"],[d,x]],[/\bsie-(\w*)/i],[a,[p,"Siemens"],[d,x]],[/\b(rct\w+) b/i],[a,[p,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[a,[p,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[a,[p,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[p,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[a,[p,"NuVision"],[d,m]],[/\b(k88) b/i],[a,[p,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[a,[p,"ZTE"],[d,x]],[/\b(gen\d{3}) b.+49h/i],[a,[p,"Swiss"],[d,x]],[/\b(zur\d{3}) b/i],[a,[p,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[a,[p,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],a,[d,m]],[/\b(ns-?\w{0,9}) b/i],[a,[p,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[p,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],a,[d,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],a,[d,x]],[/\b(ph-1) /i],[a,[p,"Essential"],[d,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[p,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[a,[p,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[a,[p,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[a,[p,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[p,a,[d,x]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[p,ar],[d,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[p,ur],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[p,ur],[d,x]],[/smart-tv.+(samsung)/i],[p,[d,k]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[p,lr],[d,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,cr],[d,k]],[/(apple) ?tv/i],[p,[a,tt+" TV"],[d,k]],[/crkey/i],[[a,sn+"cast"],[p,an],[d,k]],[/droid.+aft(\w)( bui|\))/i],[a,[p,b],[d,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[p,Ni],[d,k]],[/(bravia[\w ]+)( bui|\))/i],[a,[p,dn],[d,k]],[/(mitv-\w{5}) bui/i],[a,[p,dr],[d,k]],[/Hbbtv.*(technisat) (.*);/i],[p,a,[d,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,fr],[a,fr],[d,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,a,[d,S]],[/droid.+; (shield) bui/i],[a,[p,"Nvidia"],[d,S]],[/(playstation [345portablevi]+)/i],[a,[p,dn],[d,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[p,ar],[d,S]],[/((pebble))app/i],[p,a,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[p,tt],[d,w]],[/droid.+; (glass) \d/i],[a,[p,an],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[a,[p,ur],[d,w]],[/(quest( 2| pro)?)/i],[a,[p,Oi],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[d,y]],[/(aeobc)\b/i],[a,[p,b],[d,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[d,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,x]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[u,Cc+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[h,pr,Bi]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[h,pr,Bi]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,Li],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,h],[/\(bb(10);/i],[h,[u,Ui]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[u,cn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[u,sn+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,Mi],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,h],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,h]]},K=function(A,N){if(typeof A===c&&(N=A,A=t),!(this instanceof K))return new K(A,N).getResult();var v=typeof e!==s&&e.navigator?e.navigator:t,O=A||(v&&v.userAgent?v.userAgent:r),xt=v&&v.userAgentData?v.userAgentData:t,it=N?Ec(Pi,N):Pi,D=v&&v.userAgent==O;return this.getBrowser=function(){var _={};return _[u]=t,_[h]=t,xe.call(_,O,it.browser),_[f]=Ic(_[h]),D&&v&&v.brave&&typeof v.brave.isBrave==o&&(_[u]="Brave"),_},this.getCPU=function(){var _={};return _[g]=t,xe.call(_,O,it.cpu),_},this.getDevice=function(){var _={};return _[p]=t,_[a]=t,_[d]=t,xe.call(_,O,it.device),D&&!_[d]&&xt&&xt.mobile&&(_[d]=x),D&&_[a]=="Macintosh"&&v&&typeof v.standalone!==s&&v.maxTouchPoints&&v.maxTouchPoints>2&&(_[a]="iPad",_[d]=m),_},this.getEngine=function(){var _={};return _[u]=t,_[h]=t,xe.call(_,O,it.engine),_},this.getOS=function(){var _={};return _[u]=t,_[h]=t,xe.call(_,O,it.os),D&&!_[u]&&xt&&xt.platform!="Unknown"&&(_[u]=xt.platform.replace(/chrome os/i,Mi).replace(/macos/i,Li)),_},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return O},this.setUA=function(_){return O=typeof _===l&&_.length>C?fr(_,C):_,this},this.setUA(O),this};K.VERSION=n,K.BROWSER=un([u,h,f]),K.CPU=un([g]),K.DEVICE=un([a,p,d,S,x,k,m,w,y]),K.ENGINE=K.OS=un([u,h]),typeof ke!==s?(typeof gn!==s&&gn.exports&&(ke=gn.exports=K),ke.UAParser=K):typeof define===o&&define.amd?define(function(){return K}):typeof e!==s&&(e.UAParser=K);var Yt=typeof e!==s&&(e.jQuery||e.Zepto);if(Yt&&!Yt.ua){var fn=new K;Yt.ua=fn.getResult(),Yt.ua.get=function(){return fn.getUA()},Yt.ua.set=function(A){fn.setUA(A);var N=fn.getResult();for(var v in N)Yt.ua[v]=N[v]}}})(typeof window=="object"?window:ke)});var io=Kt((ku,ro)=>{var Tc="Expected a function",Yi="__lodash_hash_undefined__",Ki=1/0,Dc="[object Function]",Nc="[object GeneratorFunction]",Oc="[object Symbol]",Mc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lc=/^\w*$/,Rc=/^\./,Bc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pc=/[\\^$.*+?()[\]{}|]/g,Vc=/\\(\\)?/g,Fc=/^\[object .+?Constructor\]$/,jc=typeof global=="object"&&global&&global.Object===Object&&global,$c=typeof self=="object"&&self&&self.Object===Object&&self,wr=jc||$c||Function("return this")();function Gc(e,t){return e?.[t]}function zc(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var qc=Array.prototype,Jc=Function.prototype,Xi=Object.prototype,mr=wr["__core-js_shared__"],qi=function(){var e=/[^.]+$/.exec(mr&&mr.keys&&mr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Zi=Jc.toString,yr=Xi.hasOwnProperty,Qi=Xi.toString,Wc=RegExp("^"+Zi.call(yr).replace(Pc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ji=wr.Symbol,Hc=qc.splice,Yc=to(wr,"Map"),ve=to(Object,"create"),Wi=Ji?Ji.prototype:void 0,Hi=Wi?Wi.toString:void 0;function Nt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kc(){this.__data__=ve?ve(null):{}}function Xc(e){return this.has(e)&&delete this.__data__[e]}function Zc(e){var t=this.__data__;if(ve){var n=t[e];return n===Yi?void 0:n}return yr.call(t,e)?t[e]:void 0}function Qc(e){var t=this.__data__;return ve?t[e]!==void 0:yr.call(t,e)}function ta(e,t){var n=this.__data__;return n[e]=ve&&t===void 0?Yi:t,this}Nt.prototype.clear=Kc;Nt.prototype.delete=Xc;Nt.prototype.get=Zc;Nt.prototype.has=Qc;Nt.prototype.set=ta;function Qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ea(){this.__data__=[]}function na(e){var t=this.__data__,n=mn(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Hc.call(t,n,1),!0}function ra(e){var t=this.__data__,n=mn(t,e);return n<0?void 0:t[n][1]}function ia(e){return mn(this.__data__,e)>-1}function oa(e,t){var n=this.__data__,r=mn(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}Qt.prototype.clear=ea;Qt.prototype.delete=na;Qt.prototype.get=ra;Qt.prototype.has=ia;Qt.prototype.set=oa;function Ot(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sa(){this.__data__={hash:new Nt,map:new(Yc||Qt),string:new Nt}}function ca(e){return wn(this,e).delete(e)}function aa(e){return wn(this,e).get(e)}function la(e){return wn(this,e).has(e)}function da(e,t){return wn(this,e).set(e,t),this}Ot.prototype.clear=sa;Ot.prototype.delete=ca;Ot.prototype.get=aa;Ot.prototype.has=la;Ot.prototype.set=da;function mn(e,t){for(var n=e.length;n--;)if(_a(e[n][0],t))return n;return-1}function ua(e,t){t=ga(t,e)?[t]:ha(t);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ba(t[n++])];return n&&n==r?e:void 0}function fa(e){if(!no(e)||wa(e))return!1;var t=ka(e)||zc(e)?Wc:Fc;return t.test(xa(e))}function pa(e){if(typeof e=="string")return e;if(xr(e))return Hi?Hi.call(e):"";var t=e+"";return t=="0"&&1/e==-Ki?"-0":t}function ha(e){return eo(e)?e:ya(e)}function wn(e,t){var n=e.__data__;return ma(t)?n[typeof t=="string"?"string":"hash"]:n.map}function to(e,t){var n=Gc(e,t);return fa(n)?n:void 0}function ga(e,t){if(eo(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||xr(e)?!0:Lc.test(e)||!Mc.test(e)||t!=null&&e in Object(t)}function ma(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function wa(e){return!!qi&&qi in e}var ya=br(function(e){e=Sa(e);var t=[];return Rc.test(e)&&t.push(""),e.replace(Bc,function(n,r,i,o){t.push(i?o.replace(Vc,"$1"):r||n)}),t});function ba(e){if(typeof e=="string"||xr(e))return e;var t=e+"";return t=="0"&&1/e==-Ki?"-0":t}function xa(e){if(e!=null){try{return Zi.call(e)}catch{}try{return e+""}catch{}}return""}function br(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(Tc);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(br.Cache||Ot),n}br.Cache=Ot;function _a(e,t){return e===t||e!==e&&t!==t}var eo=Array.isArray;function ka(e){var t=no(e)?Qi.call(e):"";return t==Dc||t==Nc}function no(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function va(e){return!!e&&typeof e=="object"}function xr(e){return typeof e=="symbol"||va(e)&&Qi.call(e)==Oc}function Sa(e){return e==null?"":pa(e)}function Ca(e,t,n){var r=e==null?void 0:ua(e,t);return r===void 0?n:r}ro.exports=Ca});var ko=Kt((Ku,vt)=>{var{sha3_512:Ua}=Uc(),mo=24,Se=32,_r=(e=4,t=Math.random)=>{let n="";for(;n.length<e;)n=n+Math.floor(t()*36).toString(36);return n};function wo(e){let t=8n,n=0n;for(let r of e.values()){let i=BigInt(r);n=(n<<t)+i}return n}var yo=(e="")=>wo(Ua(e)).toString(36).slice(1),go=Array.from({length:26},(e,t)=>String.fromCharCode(t+97)),Ta=e=>go[Math.floor(e()*go.length)],bo=({globalObj:e=typeof global<"u"?global:typeof window<"u"?window:{},random:t=Math.random}={})=>{let n=Object.keys(e).toString(),r=n.length?n+_r(Se,t):_r(Se,t);return yo(r).substring(0,Se)},xo=e=>()=>e++,Da=476782367,_o=({random:e=Math.random,counter:t=xo(Math.floor(e()*Da)),length:n=mo,fingerprint:r=bo({random:e})}={})=>function(){let o=Ta(e),s=Date.now().toString(36),c=t().toString(36),l=_r(n,e),f=`${s+l+c+r}`;return`${o+yo(f).substring(1,n)}`},Na=_o(),Oa=(e,{minLength:t=2,maxLength:n=Se}={})=>{let r=e.length,i=/^[0-9a-z]+$/;try{if(typeof e=="string"&&r>=t&&r<=n&&i.test(e))return!0}finally{}return!1};vt.exports.getConstants=()=>({defaultLength:mo,bigLength:Se});vt.exports.init=_o;vt.exports.createId=Na;vt.exports.bufToBigInt=wo;vt.exports.createCounter=xo;vt.exports.createFingerprint=bo;vt.exports.isCuid=Oa});var kr=Kt((Xu,Ce)=>{var{createId:Ma,init:La,getConstants:Ra,isCuid:Ba}=ko();Ce.exports.createId=Ma;Ce.exports.init=La;Ce.exports.getConstants=Ra;Ce.exports.isCuid=Ba});var ec=Kt((Vf,tc)=>{var Qs="Expected a function",Xs=NaN,Gd="[object Symbol]",zd=/^\s+|\s+$/g,qd=/^[-+]0x[0-9a-f]+$/i,Jd=/^0b[01]+$/i,Wd=/^0o[0-7]+$/i,Hd=parseInt,Yd=typeof global=="object"&&global&&global.Object===Object&&global,Kd=typeof self=="object"&&self&&self.Object===Object&&self,Xd=Yd||Kd||Function("return this")(),Zd=Object.prototype,Qd=Zd.toString,tu=Math.max,eu=Math.min,bi=function(){return Xd.Date.now()};function nu(e,t,n){var r,i,o,s,c,l,f=0,a=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(Qs);t=Zs(t)||0,Qn(n)&&(a=!!n.leading,u="maxWait"in n,o=u?tu(Zs(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function p(C){var b=r,tt=i;return r=i=void 0,f=C,s=e.apply(tt,b),s}function h(C){return f=C,c=setTimeout(x,t),a?p(C):s}function g(C){var b=C-l,tt=C-f,ye=t-b;return u?eu(ye,o-tt):ye}function S(C){var b=C-l,tt=C-f;return l===void 0||b>=t||b<0||u&&tt>=o}function x(){var C=bi();if(S(C))return m(C);c=setTimeout(x,g(C))}function m(C){return c=void 0,d&&r?p(C):(r=i=void 0,s)}function k(){c!==void 0&&clearTimeout(c),f=0,r=l=i=c=void 0}function w(){return c===void 0?s:m(bi())}function y(){var C=bi(),b=S(C);if(r=arguments,i=this,l=C,b){if(c===void 0)return h(l);if(u)return c=setTimeout(x,t),p(l)}return c===void 0&&(c=setTimeout(x,t)),s}return y.cancel=k,y.flush=w,y}function ru(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Qs);return Qn(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),nu(e,t,{leading:r,maxWait:t,trailing:i})}function Qn(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function iu(e){return!!e&&typeof e=="object"}function ou(e){return typeof e=="symbol"||iu(e)&&Qd.call(e)==Gd}function Zs(e){if(typeof e=="number")return e;if(ou(e))return Xs;if(Qn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(zd,"");var n=Jd.test(e);return n||Wd.test(e)?Hd(e.slice(2),n?2:8):qd.test(e)?Xs:+e}tc.exports=ru});var nc=Kt((Ff,tr)=>{var xi=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(s,c){if(!r[s]){r[s]={};for(var l=0;l<s.length;l++)r[s][s.charAt(l)]=l}return r[s][c]}var o={compressToBase64:function(s){if(s==null)return"";var c=o._compress(s,6,function(l){return t.charAt(l)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(s){return s==null?"":s==""?null:o._decompress(s.length,32,function(c){return i(t,s.charAt(c))})},compressToUTF16:function(s){return s==null?"":o._compress(s,15,function(c){return e(c+32)})+" "},decompressFromUTF16:function(s){return s==null?"":s==""?null:o._decompress(s.length,16384,function(c){return s.charCodeAt(c)-32})},compressToUint8Array:function(s){for(var c=o.compress(s),l=new Uint8Array(c.length*2),f=0,a=c.length;f<a;f++){var u=c.charCodeAt(f);l[f*2]=u>>>8,l[f*2+1]=u%256}return l},decompressFromUint8Array:function(s){if(s==null)return o.decompress(s);for(var c=new Array(s.length/2),l=0,f=c.length;l<f;l++)c[l]=s[l*2]*256+s[l*2+1];var a=[];return c.forEach(function(u){a.push(e(u))}),o.decompress(a.join(""))},compressToEncodedURIComponent:function(s){return s==null?"":o._compress(s,6,function(c){return n.charAt(c)})},decompressFromEncodedURIComponent:function(s){return s==null?"":s==""?null:(s=s.replace(/ /g,"+"),o._decompress(s.length,32,function(c){return i(n,s.charAt(c))}))},compress:function(s){return o._compress(s,16,function(c){return e(c)})},_compress:function(s,c,l){if(s==null)return"";var f,a,u={},d={},p="",h="",g="",S=2,x=3,m=2,k=[],w=0,y=0,C;for(C=0;C<s.length;C+=1)if(p=s.charAt(C),Object.prototype.hasOwnProperty.call(u,p)||(u[p]=x++,d[p]=!0),h=g+p,Object.prototype.hasOwnProperty.call(u,h))g=h;else{if(Object.prototype.hasOwnProperty.call(d,g)){if(g.charCodeAt(0)<256){for(f=0;f<m;f++)w=w<<1,y==c-1?(y=0,k.push(l(w)),w=0):y++;for(a=g.charCodeAt(0),f=0;f<8;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1}else{for(a=1,f=0;f<m;f++)w=w<<1|a,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=0;for(a=g.charCodeAt(0),f=0;f<16;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1}S--,S==0&&(S=Math.pow(2,m),m++),delete d[g]}else for(a=u[g],f=0;f<m;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1;S--,S==0&&(S=Math.pow(2,m),m++),u[h]=x++,g=String(p)}if(g!==""){if(Object.prototype.hasOwnProperty.call(d,g)){if(g.charCodeAt(0)<256){for(f=0;f<m;f++)w=w<<1,y==c-1?(y=0,k.push(l(w)),w=0):y++;for(a=g.charCodeAt(0),f=0;f<8;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1}else{for(a=1,f=0;f<m;f++)w=w<<1|a,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=0;for(a=g.charCodeAt(0),f=0;f<16;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1}S--,S==0&&(S=Math.pow(2,m),m++),delete d[g]}else for(a=u[g],f=0;f<m;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1;S--,S==0&&(S=Math.pow(2,m),m++)}for(a=2,f=0;f<m;f++)w=w<<1|a&1,y==c-1?(y=0,k.push(l(w)),w=0):y++,a=a>>1;for(;;)if(w=w<<1,y==c-1){k.push(l(w));break}else y++;return k.join("")},decompress:function(s){return s==null?"":s==""?null:o._decompress(s.length,32768,function(c){return s.charCodeAt(c)})},_decompress:function(s,c,l){var f=[],a,u=4,d=4,p=3,h="",g=[],S,x,m,k,w,y,C,b={val:l(0),position:c,index:1};for(S=0;S<3;S+=1)f[S]=S;for(m=0,w=Math.pow(2,2),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;switch(a=m){case 0:for(m=0,w=Math.pow(2,8),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;C=e(m);break;case 1:for(m=0,w=Math.pow(2,16),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;C=e(m);break;case 2:return""}for(f[3]=C,x=C,g.push(C);;){if(b.index>s)return"";for(m=0,w=Math.pow(2,p),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;switch(C=m){case 0:for(m=0,w=Math.pow(2,8),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;f[d++]=e(m),C=d-1,u--;break;case 1:for(m=0,w=Math.pow(2,16),y=1;y!=w;)k=b.val&b.position,b.position>>=1,b.position==0&&(b.position=c,b.val=l(b.index++)),m|=(k>0?1:0)*y,y<<=1;f[d++]=e(m),C=d-1,u--;break;case 2:return g.join("")}if(u==0&&(u=Math.pow(2,p),p++),f[C])h=f[C];else if(C===d)h=x+x.charAt(0);else return null;g.push(h),f[d++]=x+h.charAt(0),u--,x=h,u==0&&(u=Math.pow(2,p),p++)}}};return o}();typeof define=="function"&&define.amd?define(function(){return xi}):typeof tr<"u"&&tr!=null?tr.exports=xi:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return xi})});var sr=T(_e()),vc=T($i());var Zt={prod:!1,loader:void 0,mode:"",status:"init",site:{id:"",api_url:"",api_prasi:{port:"",db:""},responsive:"all",domain:"",name:"",js:"",js_compiled:""},page:null,mpage:null,mpageLoaded:null,pagePreload:{},pages:{},route:hn(),treeMeta:{},comps:{pending:{},resolve:{},doc:{},all:{}},script:{db:null,api:null},compInstance:{},ws:null,wsRetry:{fast:!1,localIP:!1,disabled:!1,reconnecting:!1}};var mc=T(_e());var G=(e,t,n,r)=>{let i=e[t];return n==="desktop"||!n?!i&&e.mobile&&e.mobile[t]&&(i=e.mobile[t]):e.mobile&&e.mobile[t]&&(i=e.mobile[t]),i||(i=r),i};var Gi=(e,t)=>{let n=G(e,"adv",t,{});return typeof n.css=="string"&&n.css.trim()?cx(css`
          ${n.css}
        `,"cel",t):""};var zi=(e,t)=>{let n=G(e,"bg",t,{size:"contain",pos:"center"}),r=`${serverurl}${n.url}`;return n&&n.url&&n.url.startsWith("http")&&(r=n.url),cx(`
      background-repeat: no-repeat;
    `,n.color&&`
        background-color: ${n.color};
      `,n.url&&typeof siteApiUrl=="string"&&`
        background-image: url("${r}");
      `,n.size&&`
        background-size: ${n.size};
      `,n.pos&&`
        background-position: ${n.pos};
      `)};var oo=T(io());var so=(e,t)=>{let n=G(e,"border",t,{style:"solid",stroke:{},rounded:{tr:0,tl:0,bl:0,br:0},color:"transparent"});return cx(st(n,"stroke.l","border-left-width"),st(n,"stroke.r","border-right-width"),st(n,"stroke.b","border-bottom-width"),st(n,"stroke.t","border-top-width"),st(n,"color","border-color","transparent"),st(n,"style","border-style","dashed"),st(n,"rounded.tl","border-top-left-radius"),st(n,"rounded.tr","border-top-right-radius"),st(n,"rounded.bl","border-bottom-left-radius"),st(n,"rounded.br","border-bottom-right-radius"))},st=(e,t,n,r)=>{let i=(0,oo.default)(e,t);if(r)return i?`${n}: ${i};`:`${n}: ${r};`;if(i)return`${n}: ${i}px;`};var co=(e,t,n)=>{let r=G(e,"dim",t,{h:"fit",w:"fit"});return cx(r.w==="fit"&&`
        & > .txt-box > * {
          white-space: nowrap !important;
        }
      `,r.w==="full"&&`
        width: 100%;
      `,r.w&&typeof r.w=="number"&&r.w>=0&&`
        width: ${r.w}${r.wUnit||"px"};
        overflow-x: clip;
      `,r.h==="full"&&`
        height: ${n?"100%":"100"+(e.type==="section"?"vh":"%")};
        margin-bottom: auto;
      `,r.h&&typeof r.h=="number"&&r.h>=0&&`
        height: ${r.h}${r.hUnit||"px"};
        overflow-y: clip;
      `)};var ao=({item:e,hover:t,active:n})=>cx(t&&css`
        & {
          box-shadow: inset 0 0 0px 3px #bae3fd;
          > img {
            opacity: 0.6;
          }
        }
      `,n&&css`
        box-shadow: inset 0 0 0px 2px #009cff !important;
        > img {
          opacity: 0.6;
        }
      `);var te=window,lo=(e,t)=>{let n=G(e,"font",t,{});if(n.family){te.loadedFonts||(te.loadedFonts=[]);let r=`:wght@${[300,400,500,600].join(";")}`,i=n.family.replace(/ /g,"+");if(te.loadedFonts.indexOf(n.family)<0){te.loadedFonts.push(n.family);let o=document,s=`https://fonts.googleapis.com/css2?family=${i}${r}&display=block`;if(!o.querySelector(`link[href="${s}]`)){let c=o.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=s,o.head.appendChild(c)}}}return!n.family&&te.defaultFont&&(n.family=te.defaultFont),cx(n.color&&`
        color: ${n.color};
      `,`
      word-break: ${n.whitespace==="whitespace-normal"?"break-word":"normal"};
    `,n.color&&`
        color: ${n.color};
      `,`
      text-align: ${n.align?n.align:"left"};
    `,n.size&&`
        font-size: ${n.size||15}px;
      `,n.height&&`
        line-height: ${n.height==="auto"?"normal":`${n.height}%`};
      `,n.family&&`
        font-family: ${n.family};
      `)};var uo=(e,t)=>{let n=[],r=G(e,"layout",t,{dir:"col",align:"top-left",gap:0,wrap:void 0});if(r)r.wrap&&n.push(r.wrap==="flex-wrap"?"flex-wrap: wrap;":"flex-wrap: nowrap;"),r.dir.startsWith("col")?(r.dir==="col"?n.push("flex-direction: column;"):r.dir==="col-reverse"&&n.push("flex-direction: column-reverse;"),r.gap==="auto"?(r.align==="left"&&n.push("align-items:start; justify-content: space-between;"),r.align==="center"&&n.push("align-items:center; justify-content: space-between;"),r.align==="right"&&n.push("align-items:end; justify-content: space-between;")):(n.push(`gap: ${r.gap}px;`),r.align==="top-left"&&n.push("align-items:start; justify-content: start;"),r.align==="top-center"&&n.push("align-items:center; justify-content: start;"),r.align==="top-right"&&n.push("align-items:end; justify-content: start;"),r.align==="left"&&n.push("align-items:start; justify-content: center;"),r.align==="center"&&n.push("align-items:center; justify-content: center;"),r.align==="right"&&n.push("align-items:end; justify-content: center;"),r.align==="bottom-left"&&n.push("align-items:start; justify-content: end;"),r.align==="bottom-center"&&n.push("align-items:center; justify-content: end;"),r.align==="bottom-right"&&n.push("align-items:end; justify-content: end;"))):(r.dir==="row"?n.push("flex-direction: row;"):r.dir==="row-reverse"&&n.push("flex-direction: row-reverse;"),r.gap==="auto"?(r.align==="top"&&n.push("align-items:start; justify-content: space-between;"),r.align==="center"&&n.push("align-items:center; justify-content: space-between;"),r.align==="bottom"&&n.push("align-items:end; justify-content: space-between;")):(n.push(`
            gap: ${r.gap}px;
          `),r.align==="top-left"&&n.push("align-items:start; justify-content: start;"),r.align==="top-center"&&n.push("align-items:start; justify-content: center;"),r.align==="top-right"&&n.push("align-items:start; justify-content: end;"),r.align==="left"&&n.push("align-items:center; justify-content: start;"),r.align==="center"&&n.push("align-items:center; justify-content: center;"),r.align==="right"&&n.push("align-items:center; justify-content: end;"),r.align==="bottom-left"&&n.push("align-items:end; justify-content: start;"),r.align==="bottom-center"&&n.push("align-items:end; justify-content: center;"),r.align==="bottom-right"&&n.push("align-items:end; justify-content: end;")));else return"flex-direction:column; align-items:start; justify-content: start;";return n.join(`
	`).trim()};var fo=(e,t)=>{let n=G(e,"padding",t,{l:0,b:0,t:0,r:0});return cx(n.l!==void 0&&`
        padding-left: ${n.l}px;
      `,n.r!==void 0&&`
        padding-right: ${n.r}px;
      `,n.b!==void 0&&`
        padding-bottom: ${n.b}px;
      `,n.t!==void 0&&`
        padding-top: ${n.t}px; 
      `)};var yn=(e,t)=>{try{return cx([e.name,css`
        display: flex;
        position: relative;
        user-select: none;
        ${uo(e,t.mode)}
        ${fo(e,t.mode)}
        ${co(e,t.mode,t?.editor)}
        ${so(e,t.mode)}
        ${zi(e,t.mode)}
        ${lo(e,t.mode)}
      `,(t?.hover||t?.active)&&ao({item:e,hover:t?.hover,active:t?.active}),Gi(e,t.mode)])}catch(n){console.log(n)}return cx([])};var po=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ea(e){return typeof e=="string"&&po.test(e)}var Mt=Ea;var ho=window;function Ia(e){let t=document.createElement("a");return t.setAttribute("href",e),t.cloneNode(!1).href}function Aa(e){return e?new Promise((t,n)=>{let r="$importModule$"+Math.random().toString(32).slice(2),i=document.createElement("script"),o=()=>{delete window[r],i.onerror=null,i.onload=null,i.remove(),URL.revokeObjectURL(i.src),i.src=""};i.defer=!0,i.type="module",i.onerror=()=>{n(new Error(`Failed to import: ${e}`)),o()},i.onload=()=>{t(window[r]),o()};let c=`import * as m from "${Ia(e)}"; window.${r} = m;`,l=new Blob([c],{type:"text/javascript"});i.src=URL.createObjectURL(l),document.head.appendChild(i)}):""}var Lt=Aa;var Ks=T(kr());var q=()=>new Map,bn=e=>{let t=q();return e.forEach((n,r)=>{t.set(r,n)}),t},ct=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},vo=(e,t)=>{let n=[];for(let[r,i]of e)n.push(t(i,r));return n},So=(e,t)=>{for(let[n,r]of e)if(t(r,n))return!0;return!1};var gt=()=>new Set;var xn=e=>e[e.length-1];var Co=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},at=Array.from;var Sr=Array.isArray;var _n=class{constructor(){this._observers=q()}on(t,n){ct(this._observers,t,gt).add(n)}once(t,n){let r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){let r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return at((this._observers.get(t)||q()).values()).forEach(r=>r(...n))}destroy(){this._observers=q()}};var X=Math.floor;var ee=Math.abs;var kn=(e,t)=>e<t?e:t,mt=(e,t)=>e>t?e:t,Qu=Number.isNaN;var vn=e=>e!==0?e<0:1/e<0;var Pa=String.fromCharCode,tf=String.fromCodePoint,ef=Pa(65535),Va=e=>e.toLowerCase(),Fa=/^\s*/g,ja=e=>e.replace(Fa,""),$a=/([A-Z])/g,Er=(e,t)=>ja(e.replace($a,n=>`${t}${Va(n)}`));var Ga=e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},re=typeof TextEncoder<"u"?new TextEncoder:null,za=e=>re.encode(e),Eo=re?za:Ga;var ne=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ne&&ne.decode(new Uint8Array).length===1&&(ne=null);var Ar=e=>e===void 0?null:e;var Ur=class{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}},Io=new Ur,Ja=!0;try{typeof localStorage<"u"&&(Io=localStorage,Ja=!1)}catch{}var Ao=Io;var To=Object.assign,Ha=Object.keys,Do=(e,t)=>{for(let n in e)t(e[n],n)};var Uo=e=>Ha(e).length;var No=e=>{for(let t in e)return!1;return!0},Ya=(e,t)=>{for(let n in e)if(!t(e[n],n))return!1;return!0},Ka=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Oo=(e,t)=>e===t||Uo(e)===Uo(t)&&Ya(e,(n,r)=>(n!==void 0||Ka(t,r))&&t[r]===n);var Ie=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Ie(e,t,n+1)}};var Mo=e=>e;var Lo=(e,t)=>t.includes(e);var Ae=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name);var nf=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,lt,Za=[],Qa=()=>{if(lt===void 0)if(Ae){lt=q();let e=process.argv,t=null;for(let n=0;n<e.length;n++){let r=e[n];r[0]==="-"?(t!==null&&lt.set(t,""),t=r):t!==null?(lt.set(t,r),t=null):Za.push(r)}t!==null&&lt.set(t,"")}else typeof location=="object"?(lt=q(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){let[t,n]=e.split("=");lt.set(`--${Er(t,"-")}`,n),lt.set(`-${Er(t,"-")}`,n)}})):lt=q();return lt},Tr=e=>Qa().has(e);var Dr=e=>Ae?Ar(process.env[e.toUpperCase()]):Ar(Ao.getItem(e));var tl=e=>Tr("--"+e)||Dr(e)!==null,rf=tl("production"),Bo=Ae&&Lo(process.env.FORCE_COLOR,["true","1","2"]),Po=!Tr("no-colors")&&(!Ae||process.stdout.isTTY||Bo)&&(!Ae||Tr("color")||Bo||Dr("COLORTERM")!==null||(Dr("TERM")||"").includes("color"));var Nr=Number.MAX_SAFE_INTEGER,of=Number.MIN_SAFE_INTEGER,sf=1<<31;var Vo=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&X(e)===e),cf=Number.isNaN,af=Number.parseInt;var dt=e=>new Error(e),et=()=>{throw dt("Method unimplemented")},nt=()=>{throw dt("Unexpected case")};var Go=dt("Unexpected end of array"),zo=dt("Integer out of Range"),ie=class{constructor(t){this.arr=t,this.pos=0}},Vt=e=>new ie(e),qo=e=>e.pos!==e.arr.length;var nl=(e,t)=>{let n=Te(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},J=e=>nl(e,E(e));var Rt=e=>e.arr[e.pos++];var E=e=>{let t=0,n=1,r=e.arr.length;for(;e.pos<r;){let i=e.arr[e.pos++];if(t=t+(i&127)*n,n*=128,i<128)return t;if(t>Nr)throw zo}throw Go},En=e=>{let t=e.arr[e.pos++],n=t&63,r=64,i=(t&64)>0?-1:1;if(!(t&128))return i*n;let o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&127)*r,r*=128,t<128)return i*n;if(n>Nr)throw zo}throw Go};var rl=e=>{let t=E(e);if(t===0)return"";{let n=String.fromCodePoint(Rt(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Rt(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},il=e=>ne.decode(J(e)),Bt=ne?il:rl;var Or=(e,t)=>{let n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},ol=e=>Or(e,4).getFloat32(0,!1),sl=e=>Or(e,8).getFloat64(0,!1),cl=e=>Or(e,8).getBigInt64(0,!1);var al=[e=>{},e=>null,En,ol,sl,cl,e=>!1,e=>!0,Bt,e=>{let t=E(e),n={};for(let r=0;r<t;r++){let i=Bt(e);n[i]=oe(e)}return n},e=>{let t=E(e),n=[];for(let r=0;r<t;r++)n.push(oe(e));return n},J],oe=e=>al[127-Rt(e)](e),Ue=class extends ie{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),qo(this)?this.count=E(this)+1:this.count=-1),this.count--,this.s}};var Pt=class extends ie{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=En(this);let t=vn(this.s);this.count=1,t&&(this.s=-this.s,this.count=E(this)+2)}return this.count--,this.s}};var se=class extends ie{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let t=En(this),n=t&1;this.diff=X(t/2),this.count=1,n&&(this.count=E(this)+2)}return this.s+=this.diff,this.count--,this.s}},Cn=class{constructor(t){this.decoder=new Pt(t),this.str=Bt(this.decoder),this.spos=0}read(){let t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}};var dl=e=>new Uint8Array(e),Te=(e,t,n)=>new Uint8Array(e,t,n);var Jo=e=>{let t=dl(e.byteLength);return t.set(e),t};var Ft=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},Ne=()=>new Ft;var ul=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t};var rt=e=>{let t=new Uint8Array(ul(e)),n=0;for(let r=0;r<e.bufs.length;r++){let i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(Te(e.cbuf.buffer,0,e.cpos),n),t},fl=(e,t)=>{let n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(Te(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(mt(n,t)*2),e.cpos=0)},F=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t};var An=F;var I=(e,t)=>{for(;t>127;)F(e,128|127&t),t=X(t/128);F(e,127&t)},Un=(e,t)=>{let n=vn(t);for(n&&(t=-t),F(e,(t>63?128:0)|(n?64:0)|63&t),t=X(t/64);t>0;)F(e,(t>127?128:0)|127&t),t=X(t/128)},Lr=new Uint8Array(3e4),pl=Lr.length/3,hl=(e,t)=>{if(t.length<pl){let n=re.encodeInto(t,Lr).written||0;I(e,n);for(let r=0;r<n;r++)F(e,Lr[r])}else W(e,Eo(t))},gl=(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;I(e,r);for(let i=0;i<r;i++)F(e,n.codePointAt(i))},jt=re&&re.encodeInto?hl:gl;var Oe=(e,t)=>{let n=e.cbuf.length,r=e.cpos,i=kn(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(mt(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},W=(e,t)=>{I(e,t.byteLength),Oe(e,t)},Rr=(e,t)=>{fl(e,t);let n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},ml=(e,t)=>Rr(e,4).setFloat32(0,t,!1),wl=(e,t)=>Rr(e,8).setFloat64(0,t,!1),yl=(e,t)=>Rr(e,8).setBigInt64(0,t,!1);var Wo=new DataView(new ArrayBuffer(4)),bl=e=>(Wo.setFloat32(0,e),Wo.getFloat32(0)===e),ae=(e,t)=>{switch(typeof t){case"string":F(e,119),jt(e,t);break;case"number":Vo(t)&&ee(t)<=2147483647?(F(e,125),Un(e,t)):bl(t)?(F(e,124),ml(e,t)):(F(e,123),wl(e,t));break;case"bigint":F(e,122),yl(e,t);break;case"object":if(t===null)F(e,126);else if(Sr(t)){F(e,117),I(e,t.length);for(let n=0;n<t.length;n++)ae(e,t[n])}else if(t instanceof Uint8Array)F(e,116),W(e,t);else{F(e,118);let n=Object.keys(t);I(e,n.length);for(let r=0;r<n.length;r++){let i=n[r];jt(e,i),ae(e,t[i])}}break;case"boolean":F(e,t?120:121);break;default:F(e,127)}},De=class extends Ft{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&I(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}};var Ho=e=>{e.count>0&&(Un(e.encoder,e.count===1?e.s:-e.s),e.count>1&&I(e.encoder,e.count-2))},$t=class{constructor(){this.encoder=new Ft,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Ho(this),this.count=1,this.s=t)}toUint8Array(){return Ho(this),rt(this.encoder)}};var Yo=e=>{if(e.count>0){let t=e.diff*2+(e.count===1?0:1);Un(e.encoder,t),e.count>1&&I(e.encoder,e.count-2)}},le=class{constructor(){this.encoder=new Ft,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Yo(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Yo(this),rt(this.encoder)}},In=class{constructor(){this.sarr=[],this.s="",this.lensE=new $t}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){let t=new Ft;return this.sarr.push(this.s),this.s="",jt(t,this.sarr.join("")),Oe(t,this.lensE.toUint8Array()),rt(t)}};var uf=crypto.subtle,Ko=crypto.getRandomValues.bind(crypto);var Br=()=>Ko(new Uint32Array(1))[0];var _l=[1e7]+-1e3+-4e3+-8e3+-1e11,Xo=()=>_l.replace(/[018]/g,e=>(e^Br()&15>>e/4).toString(16));var Zo=Date.now;var Pr=e=>new Promise(e);var hf=Promise.all.bind(Promise);var Vr=class{constructor(t,n){this.left=t,this.right=n}},ut=(e,t)=>new Vr(e,t);var Gt=typeof document<"u"?document:{};var gf=typeof DOMParser<"u"?new DOMParser:null;var Qo=e=>vo(e,(t,n)=>`${n}:${t};`).join("");var mf=Gt.ELEMENT_NODE,wf=Gt.TEXT_NODE,yf=Gt.CDATA_SECTION_NODE,bf=Gt.COMMENT_NODE,xf=Gt.DOCUMENT_NODE,_f=Gt.DOCUMENT_TYPE_NODE,kf=Gt.DOCUMENT_FRAGMENT_NODE;var ft=Symbol;var Me=ft(),Le=ft(),Fr=ft(),jr=ft(),$r=ft(),Re=ft(),Gr=ft(),Be=ft(),zr=ft(),ts=e=>{let t=[],n=[],r=0;for(;r<e.length;r++){let i=e[r];i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n};var vf=Zo();var Ul={[Me]:ut("font-weight","bold"),[Le]:ut("font-weight","normal"),[Fr]:ut("color","blue"),[$r]:ut("color","green"),[jr]:ut("color","grey"),[Re]:ut("color","red"),[Gr]:ut("color","purple"),[Be]:ut("color","orange"),[zr]:ut("color","black")},Tl=e=>{let t=[],n=[],r=q(),i=[],o=0;for(;o<e.length;o++){let s=e[o],c=Ul[s];if(c!==void 0)r.set(c.left,c.right);else if(s.constructor===String||s.constructor===Number){let l=Qo(r);o>0||l.length>0?(t.push("%c"+s),n.push(l)):t.push(s)}else break}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){let s=e[o];s instanceof Symbol||i.push(s)}return i},Dl=Po?Tl:ts,es=(...e)=>{console.log(...Dl(e)),Nl.forEach(t=>t.print(e))};var Nl=gt();var ns=e=>({[Symbol.iterator](){return this},next:e}),rs=(e,t)=>ns(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),Tn=(e,t)=>ns(()=>{let{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});var Fe=class{constructor(t,n){this.clock=t,this.len=n}},zt=class{constructor(){this.clients=new Map}},ws=(e,t,n)=>t.clients.forEach((r,i)=>{let o=e.doc.store.clients.get(i);for(let s=0;s<r.length;s++){let c=r[s];Es(e,o,c.clock,c.len,n)}}),Bl=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){let i=X((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null},ys=(e,t)=>{let n=e.clients.get(t.client);return n!==void 0&&Bl(n,t.clock)!==null},ai=e=>{e.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<t.length;n++){let i=t[r-1],o=t[n];i.clock+i.len>=o.clock?i.len=mt(i.len,o.clock+o.len-i.clock):(r<n&&(t[r]=o),r++)}t.length=r})},Pl=e=>{let t=new zt;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){let o=r.slice();for(let s=n+1;s<e.length;s++)Co(o,e[s].clients.get(i)||[]);t.clients.set(i,o)}});return ai(t),t},Rn=(e,t,n,r)=>{ct(e.clients,t,()=>[]).push(new Fe(n,r))},bs=()=>new zt,Vl=e=>{let t=bs();return e.clients.forEach((n,r)=>{let i=[];for(let o=0;o<n.length;o++){let s=n[o];if(s.deleted){let c=s.id.clock,l=s.length;if(o+1<n.length)for(let f=n[o+1];o+1<n.length&&f.deleted;f=n[++o+1])l+=f.length;i.push(new Fe(c,l))}}i.length>0&&t.clients.set(r,i)}),t},pe=(e,t)=>{I(e.restEncoder,t.clients.size),at(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),I(e.restEncoder,n);let i=r.length;I(e.restEncoder,i);for(let o=0;o<i;o++){let s=r[o];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},li=e=>{let t=new zt,n=E(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();let i=E(e.restDecoder),o=E(e.restDecoder);if(o>0){let s=ct(t.clients,i,()=>[]);for(let c=0;c<o;c++)s.push(new Fe(e.readDsClock(),e.readDsLen()))}}return t},ss=(e,t,n)=>{let r=new zt,i=E(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();let s=E(e.restDecoder),c=E(e.restDecoder),l=n.clients.get(s)||[],f=j(n,s);for(let a=0;a<c;a++){let u=e.readDsClock(),d=u+e.readDsLen();if(u<f){f<d&&Rn(r,s,f,d-f);let p=pt(l,u),h=l[p];for(!h.deleted&&h.id.clock<u&&(l.splice(p+1,0,Hn(t,h,u-h.id.clock)),p++);p<l.length&&(h=l[p++],h.id.clock<d);)h.deleted||(d<h.id.clock+h.length&&l.splice(p,0,Hn(t,h,d-h.id.clock)),h.delete(t))}else Rn(r,s,u,d-u)}}if(r.clients.size>0){let o=new wt;return I(o.restEncoder,0),pe(o,r),o.toUint8Array()}return null};var xs=Br,At=class e extends _n{constructor({guid:t=Xo(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:c=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=xs(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new jn,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=c,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Pr(f=>{this.on("load",()=>{this.isLoaded=!0,f(this)})});let l=()=>Pr(f=>{let a=u=>{(u===void 0||u===!0)&&(this.off("sync",a),f())};this.on("sync",a)});this.on("sync",f=>{f===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=f===void 0||f===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=l()}load(){let t=this._item;t!==null&&!this.shouldLoad&&M(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(at(this.subdocs).map(t=>t.guid))}transact(t,n=null){return M(this,t,n)}get(t,n=R){let r=ct(this.share,t,()=>{let o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==R&&i!==n)if(i===R){let o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,qn)}getText(t=""){return this.get(t,Je)}getMap(t=""){return this.get(t,Jt)}getXmlFragment(t=""){return this.get(t,ue)}toJSON(){let t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){at(this.subdocs).forEach(n=>n.destroy());let t=this._item;if(t!==null){this._item=null;let n=t.content;n.doc=new e({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,M(t.parent.doc,r=>{let i=n.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,n){super.on(t,n)}off(t,n){super.off(t,n)}},Bn=class{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return E(this.restDecoder)}readDsLen(){return E(this.restDecoder)}},Pn=class extends Bn{readLeftID(){return U(E(this.restDecoder),E(this.restDecoder))}readRightID(){return U(E(this.restDecoder),E(this.restDecoder))}readClient(){return E(this.restDecoder)}readInfo(){return Rt(this.restDecoder)}readString(){return Bt(this.restDecoder)}readParentInfo(){return E(this.restDecoder)===1}readTypeRef(){return E(this.restDecoder)}readLen(){return E(this.restDecoder)}readAny(){return oe(this.restDecoder)}readBuf(){return Jo(J(this.restDecoder))}readJSON(){return JSON.parse(Bt(this.restDecoder))}readKey(){return Bt(this.restDecoder)}},Wr=class{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=E(this.restDecoder),this.dsCurrVal}readDsLen(){let t=E(this.restDecoder)+1;return this.dsCurrVal+=t,t}},Ut=class extends Wr{constructor(t){super(t),this.keys=[],E(t),this.keyClockDecoder=new se(J(t)),this.clientDecoder=new Pt(J(t)),this.leftClockDecoder=new se(J(t)),this.rightClockDecoder=new se(J(t)),this.infoDecoder=new Ue(J(t),Rt),this.stringDecoder=new Cn(J(t)),this.parentInfoDecoder=new Ue(J(t),Rt),this.typeRefDecoder=new Pt(J(t)),this.lenDecoder=new Pt(J(t))}readLeftID(){return new It(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new It(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return oe(this.restDecoder)}readBuf(){return J(this.restDecoder)}readJSON(){return oe(this.restDecoder)}readKey(){let t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{let n=this.stringDecoder.read();return this.keys.push(n),n}}},Vn=class{constructor(){this.restEncoder=Ne()}toUint8Array(){return rt(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){I(this.restEncoder,t)}writeDsLen(t){I(this.restEncoder,t)}},qt=class extends Vn{writeLeftID(t){I(this.restEncoder,t.client),I(this.restEncoder,t.clock)}writeRightID(t){I(this.restEncoder,t.client),I(this.restEncoder,t.clock)}writeClient(t){I(this.restEncoder,t)}writeInfo(t){An(this.restEncoder,t)}writeString(t){jt(this.restEncoder,t)}writeParentInfo(t){I(this.restEncoder,t?1:0)}writeTypeRef(t){I(this.restEncoder,t)}writeLen(t){I(this.restEncoder,t)}writeAny(t){ae(this.restEncoder,t)}writeBuf(t){W(this.restEncoder,t)}writeJSON(t){jt(this.restEncoder,JSON.stringify(t))}writeKey(t){jt(this.restEncoder,t)}},Fn=class{constructor(){this.restEncoder=Ne(),this.dsCurrVal=0}toUint8Array(){return rt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){let n=t-this.dsCurrVal;this.dsCurrVal=t,I(this.restEncoder,n)}writeDsLen(t){t===0&&nt(),I(this.restEncoder,t-1),this.dsCurrVal+=t}},wt=class extends Fn{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new le,this.clientEncoder=new $t,this.leftClockEncoder=new le,this.rightClockEncoder=new le,this.infoEncoder=new De(An),this.stringEncoder=new In,this.parentInfoEncoder=new De(An),this.typeRefEncoder=new $t,this.lenEncoder=new $t}toUint8Array(){let t=Ne();return I(t,0),W(t,this.keyClockEncoder.toUint8Array()),W(t,this.clientEncoder.toUint8Array()),W(t,this.leftClockEncoder.toUint8Array()),W(t,this.rightClockEncoder.toUint8Array()),W(t,rt(this.infoEncoder)),W(t,this.stringEncoder.toUint8Array()),W(t,rt(this.parentInfoEncoder)),W(t,this.typeRefEncoder.toUint8Array()),W(t,this.lenEncoder.toUint8Array()),Oe(t,rt(this.restEncoder)),rt(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){ae(this.restEncoder,t)}writeBuf(t){W(this.restEncoder,t)}writeJSON(t){ae(this.restEncoder,t)}writeKey(t){let n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}},Fl=(e,t,n,r)=>{r=mt(r,t[0].id.clock);let i=pt(t,r);I(e.restEncoder,t.length-i),e.writeClient(n),I(e.restEncoder,r);let o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)},di=(e,t,n)=>{let r=new Map;n.forEach((i,o)=>{j(t,o)>i&&r.set(o,i)}),Yn(t).forEach((i,o)=>{n.has(o)||r.set(o,0)}),I(e.restEncoder,r.size),at(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{Fl(e,t.clients.get(i),i,o)})},jl=(e,t)=>{let n=q(),r=E(e.restDecoder);for(let i=0;i<r;i++){let o=E(e.restDecoder),s=new Array(o),c=e.readClient(),l=E(e.restDecoder);n.set(c,{i:0,refs:s});for(let f=0;f<o;f++){let a=e.readInfo();switch(31&a){case 0:{let u=e.readLen();s[f]=new H(U(c,l),u),l+=u;break}case 10:{let u=E(e.restDecoder);s[f]=new Y(U(c,l),u),l+=u;break}default:{let u=(a&192)===0,d=new $(U(c,l),null,(a&128)===128?e.readLeftID():null,null,(a&64)===64?e.readRightID():null,u?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,u&&(a&32)===32?e.readString():null,qs(e,a));s[f]=d,l+=d.length}}}}return n},$l=(e,t,n)=>{let r=[],i=at(n.keys()).sort((p,h)=>p-h);if(i.length===0)return null;let o=()=>{if(i.length===0)return null;let p=n.get(i[i.length-1]);for(;p.refs.length===p.i;)if(i.pop(),i.length>0)p=n.get(i[i.length-1]);else return null;return p},s=o();if(s===null&&r.length===0)return null;let c=new jn,l=new Map,f=(p,h)=>{let g=l.get(p);(g==null||g>h)&&l.set(p,h)},a=s.refs[s.i++],u=new Map,d=()=>{for(let p of r){let h=p.id.client,g=n.get(h);g?(g.i--,c.clients.set(h,g.refs.slice(g.i)),n.delete(h),g.i=0,g.refs=[]):c.clients.set(h,[p]),i=i.filter(S=>S!==h)}r.length=0};for(;;){if(a.constructor!==Y){let h=ct(u,a.id.client,()=>j(t,a.id.client))-a.id.clock;if(h<0)r.push(a),f(a.id.client,a.id.clock-1),d();else{let g=a.getMissing(e,t);if(g!==null){r.push(a);let S=n.get(g)||{refs:[],i:0};if(S.refs.length===S.i)f(g,j(t,g)),d();else{a=S.refs[S.i++];continue}}else(h===0||h<a.length)&&(a.integrate(e,h),u.set(a.id.client,a.id.clock+a.length))}}if(r.length>0)a=r.pop();else if(s!==null&&s.i<s.refs.length)a=s.refs[s.i++];else{if(s=o(),s===null)break;a=s.refs[s.i++]}}if(c.clients.size>0){let p=new wt;return di(p,c,new Map),I(p.restEncoder,0),{missing:l,update:p.toUint8Array()}}return null},Gl=(e,t)=>di(e,t.doc.store,t.beforeState),zl=(e,t,n,r=new Ut(e))=>M(t,i=>{i.local=!1;let o=!1,s=i.doc,c=s.store,l=jl(r,s),f=$l(i,c,l),a=c.pendingStructs;if(a){for(let[d,p]of a.missing)if(p<j(c,d)){o=!0;break}if(f){for(let[d,p]of f.missing){let h=a.missing.get(d);(h==null||h>p)&&a.missing.set(d,p)}a.update=$n([a.update,f.update])}}else c.pendingStructs=f;let u=ss(r,i,c);if(c.pendingDs){let d=new Ut(Vt(c.pendingDs));E(d.restDecoder);let p=ss(d,i,c);u&&p?c.pendingDs=$n([u,p]):c.pendingDs=u||p}else c.pendingDs=u;if(o){let d=c.pendingStructs.update;c.pendingStructs=null,_s(i.doc,d)}},n,!1);var _s=(e,t,n,r=Ut)=>{let i=Vt(t);zl(i,e,n,new r(i))},he=(e,t,n)=>_s(e,t,n,Pn),ql=(e,t,n=new Map)=>{di(e,t.store,n),pe(e,Vl(t.store))},Jl=(e,t=new Uint8Array([0]),n=new wt)=>{let r=ks(t);ql(n,e,r);let i=[n.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(od(e.store.pendingStructs.update,t)),i.length>1){if(n.constructor===qt)return rd(i.map((o,s)=>s===0?o:cd(o)));if(n.constructor===wt)return $n(i)}return i[0]},ui=(e,t)=>Jl(e,t,new qt),Wl=e=>{let t=new Map,n=E(e.restDecoder);for(let r=0;r<n;r++){let i=E(e.restDecoder),o=E(e.restDecoder);t.set(i,o)}return t},ks=e=>Wl(new Bn(Vt(e))),vs=(e,t)=>(I(e.restEncoder,t.size),at(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{I(e.restEncoder,n),I(e.restEncoder,r)}),e),Hl=(e,t)=>vs(e,Yn(t.store)),Yl=(e,t=new Fn)=>(e instanceof Map?vs(t,e):Hl(t,e),t.toUint8Array()),fi=e=>Yl(e,new Vn),Hr=class{constructor(){this.l=[]}},cs=()=>new Hr,as=(e,t)=>e.l.push(t),ls=(e,t)=>{let n=e.l,r=n.length;e.l=n.filter(i=>t!==i),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Ss=(e,t,n)=>Ie(e.l,[t,n]),It=class{constructor(t,n){this.client=t,this.clock=n}},Dn=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,U=(e,t)=>new It(e,t);var Kl=e=>{for(let[t,n]of e.doc.share.entries())if(n===e)return t;throw nt()};var Yr=class{constructor(t,n){this.ds=t,this.sv=n}};var Xl=(e,t)=>new Yr(e,t),Lf=Xl(bs(),new Map);var Pe=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ys(t.ds,e.id),Kr=(e,t)=>{let n=ct(e.meta,Kr,gt),r=e.doc.store;n.has(t)||(t.sv.forEach((i,o)=>{i<j(r,o)&&Tt(e,U(o,i))}),ws(e,t.ds,i=>{}),n.add(t))};var jn=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Yn=e=>{let t=new Map;return e.clients.forEach((n,r)=>{let i=n[n.length-1];t.set(r,i.id.clock+i.length)}),t},j=(e,t)=>{let n=e.clients.get(t);if(n===void 0)return 0;let r=n[n.length-1];return r.id.clock+r.length},Cs=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{let r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw nt()}n.push(t)},pt=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=X(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=X((n+r)/2)}throw nt()},Zl=(e,t)=>{let n=e.clients.get(t.client);return n[pt(n,t.clock)]},qr=Zl,Xr=(e,t,n)=>{let r=pt(t,n),i=t[r];return i.id.clock<n&&i instanceof $?(t.splice(r+1,0,Hn(e,i,n-i.id.clock)),r+1):r},Tt=(e,t)=>{let n=e.doc.store.clients.get(t.client);return n[Xr(e,n,t.clock)]},ds=(e,t,n)=>{let r=t.clients.get(n.client),i=pt(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==H&&r.splice(i+1,0,Hn(e,o,n.clock-o.id.clock+1)),o},Ql=(e,t,n)=>{let r=e.clients.get(t.id.client);r[pt(r,t.id.clock)]=n},Es=(e,t,n,r,i)=>{if(r===0)return;let o=n+r,s=Xr(e,t,n),c;do c=t[s++],o<c.id.clock+c.length&&Xr(e,t,o),i(c);while(s<t.length&&t[s].id.clock<o)},Zr=class{constructor(t,n,r){this.doc=t,this.deleteSet=new zt,this.beforeState=Yn(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},us=(e,t)=>t.deleteSet.clients.size===0&&!So(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(ai(t.deleteSet),Gl(e,t),pe(e,t.deleteSet),!0),fs=(e,t,n)=>{let r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&ct(e.changed,t,gt).add(n)},Mn=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0;n=r,r=e[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof $&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}let o=t-i;return o&&e.splice(t+1-o,o),o},td=(e,t,n)=>{for(let[r,i]of e.clients.entries()){let o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){let c=i[s],l=c.clock+c.len;for(let f=pt(o,c.clock),a=o[f];f<o.length&&a.id.clock<l;a=o[++f]){let u=o[f];if(c.clock+c.len<=u.id.clock)break;u instanceof $&&u.deleted&&!u.keep&&n(u)&&u.gc(t,!1)}}}},ed=(e,t)=>{e.clients.forEach((n,r)=>{let i=t.clients.get(r);for(let o=n.length-1;o>=0;o--){let s=n[o],c=kn(i.length-1,1+pt(i,s.clock+s.len-1));for(let l=c,f=i[l];l>0&&f.id.clock>=s.clock;f=i[l])l-=1+Mn(i,l)}})};var Is=(e,t)=>{if(t<e.length){let n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{ai(o),n.afterState=Yn(n.doc.store),r.emit("beforeObserverCalls",[n,r]);let c=[];n.changed.forEach((l,f)=>c.push(()=>{(f._item===null||!f._item.deleted)&&f._callObserver(n,l)})),c.push(()=>{n.changedParentTypes.forEach((l,f)=>{f._dEH.l.length>0&&(f._item===null||!f._item.deleted)&&(l=l.filter(a=>a.target._item===null||!a.target._item.deleted),l.forEach(a=>{a.currentTarget=f,a._path=null}),l.sort((a,u)=>a.path.length-u.path.length),Ss(f._dEH,l,n))})}),c.push(()=>r.emit("afterTransaction",[n,r])),Ie(c,[]),n._needFormattingCleanup&&wd(n)}finally{r.gc&&td(o,i,r.gcFilter),ed(o,i),n.afterState.forEach((a,u)=>{let d=n.beforeState.get(u)||0;if(d!==a){let p=i.clients.get(u),h=mt(pt(p,d),1);for(let g=p.length-1;g>=h;)g-=1+Mn(p,g)}});for(let a=s.length-1;a>=0;a--){let{client:u,clock:d}=s[a].id,p=i.clients.get(u),h=pt(p,d);h+1<p.length&&Mn(p,h+1)>1||h>0&&Mn(p,h)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(es(Be,Me,"[yjs] ",Le,Re,"Changed the client-id because another client seems to be using it."),r.clientID=xs()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){let a=new qt;us(a,n)&&r.emit("update",[a.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){let a=new wt;us(a,n)&&r.emit("updateV2",[a.toUint8Array(),n.origin,r,n])}let{subdocsAdded:c,subdocsLoaded:l,subdocsRemoved:f}=n;(c.size>0||f.size>0||l.size>0)&&(c.forEach(a=>{a.clientID=r.clientID,a.collectionid==null&&(a.collectionid=r.collectionid),r.subdocs.add(a)}),f.forEach(a=>r.subdocs.delete(a)),r.emit("subdocs",[{loaded:l,added:c,removed:f},r,n]),f.forEach(a=>a.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Is(e,t+1)}}},M=(e,t,n=null,r=!0)=>{let i=e._transactionCleanups,o=!1,s=null;e._transaction===null&&(o=!0,e._transaction=new Zr(e,n,r),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){let c=e._transaction===i[0];e._transaction=null,c&&Is(i,0)}}return s};function*nd(e){let t=E(e.restDecoder);for(let n=0;n<t;n++){let r=E(e.restDecoder),i=e.readClient(),o=E(e.restDecoder);for(let s=0;s<r;s++){let c=e.readInfo();if(c===10){let l=E(e.restDecoder);yield new Y(U(i,o),l),o+=l}else if(31&c){let l=(c&192)===0,f=new $(U(i,o),null,(c&128)===128?e.readLeftID():null,null,(c&64)===64?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(c&32)===32?e.readString():null,qs(e,c));yield f,o+=f.length}else{let l=e.readLen();yield new H(U(i,o),l),o+=l}}}}var je=class{constructor(t,n){this.gen=nd(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Y);return this.curr}};var $e=class{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}},rd=e=>$n(e,Pn,qt);var id=(e,t)=>{if(e.constructor===H){let{client:n,clock:r}=e.id;return new H(U(n,r+t),e.length-t)}else if(e.constructor===Y){let{client:n,clock:r}=e.id;return new Y(U(n,r+t),e.length-t)}else{let n=e,{client:r,clock:i}=n.id;return new $(U(r,i+t),null,U(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},$n=(e,t=Ut,n=wt)=>{if(e.length===1)return e[0];let r=e.map(a=>new t(Vt(a))),i=r.map(a=>new je(a,!0)),o=null,s=new n,c=new $e(s);for(;i=i.filter(d=>d.curr!==null),i.sort((d,p)=>{if(d.curr.id.client===p.curr.id.client){let h=d.curr.id.clock-p.curr.id.clock;return h===0?d.curr.constructor===p.curr.constructor?0:d.curr.constructor===Y?1:-1:h}else return p.curr.id.client-d.curr.id.client}),i.length!==0;){let a=i[0],u=a.curr.id.client;if(o!==null){let d=a.curr,p=!1;for(;d!==null&&d.id.clock+d.length<=o.struct.id.clock+o.struct.length&&d.id.client>=o.struct.id.client;)d=a.next(),p=!0;if(d===null||d.id.client!==u||p&&d.id.clock>o.struct.id.clock+o.struct.length)continue;if(u!==o.struct.id.client)Ct(c,o.struct,o.offset),o={struct:d,offset:0},a.next();else if(o.struct.id.clock+o.struct.length<d.id.clock)if(o.struct.constructor===Y)o.struct.length=d.id.clock+d.length-o.struct.id.clock;else{Ct(c,o.struct,o.offset);let h=d.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Y(U(u,o.struct.id.clock+o.struct.length),h),offset:0}}else{let h=o.struct.id.clock+o.struct.length-d.id.clock;h>0&&(o.struct.constructor===Y?o.struct.length-=h:d=id(d,h)),o.struct.mergeWith(d)||(Ct(c,o.struct,o.offset),o={struct:d,offset:0},a.next())}}else o={struct:a.curr,offset:0},a.next();for(let d=a.curr;d!==null&&d.id.client===u&&d.id.clock===o.struct.id.clock+o.struct.length&&d.constructor!==Y;d=a.next())Ct(c,o.struct,o.offset),o={struct:d,offset:0}}o!==null&&(Ct(c,o.struct,o.offset),o=null),pi(c);let l=r.map(a=>li(a)),f=Pl(l);return pe(s,f),s.toUint8Array()},od=(e,t,n=Ut,r=wt)=>{let i=ks(t),o=new r,s=new $e(o),c=new n(Vt(e)),l=new je(c,!1);for(;l.curr;){let a=l.curr,u=a.id.client,d=i.get(u)||0;if(l.curr.constructor===Y){l.next();continue}if(a.id.clock+a.length>d)for(Ct(s,a,mt(d-a.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)Ct(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=d;)l.next()}pi(s);let f=li(c);return pe(o,f),o.toUint8Array()};var As=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:rt(e.encoder.restEncoder)}),e.encoder.restEncoder=Ne(),e.written=0)},Ct=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&As(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),I(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},pi=e=>{As(e);let t=e.encoder.restEncoder;I(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){let r=e.clientStructs[n];I(t,r.written),Oe(t,r.restEncoder)}},sd=(e,t,n,r)=>{let i=new n(Vt(e)),o=new je(i,!1),s=new r,c=new $e(s);for(let f=o.curr;f!==null;f=o.next())Ct(c,t(f),0);pi(c);let l=li(i);return pe(s,l),s.toUint8Array()};var cd=e=>sd(e,Mo,Ut,qt),ps="You must not compute changes after the event-handler fired.",de=class{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ad(this.currentTarget,this.target))}deletes(t){return ys(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw dt(ps);let t=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){let o=n._map.get(i),s,c;if(this.adds(o)){let l=o.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(o))if(l!==null&&this.deletes(l))s="delete",c=xn(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",c=xn(l.content.getContent())):(s="add",c=void 0)}else if(this.deletes(o))s="delete",c=xn(o.content.getContent());else return;t.set(i,{action:s,oldValue:c})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw dt(ps);let n=this.target,r=gt(),i=gt(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let c=null,l=()=>{c&&o.push(c)};for(let f=n._start;f!==null;f=f.right)f.deleted?this.deletes(f)&&!this.adds(f)&&((c===null||c.delete===void 0)&&(l(),c={delete:0}),c.delete+=f.length,i.add(f)):this.adds(f)?((c===null||c.insert===void 0)&&(l(),c={insert:[]}),c.insert=c.insert.concat(f.content.getContent()),r.add(f)):((c===null||c.retain===void 0)&&(l(),c={retain:0}),c.retain+=f.length);c!==null&&c.retain===void 0&&l()}this._changes=t}return t}},ad=(e,t)=>{let n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||r++,i=i.right;n.unshift(r)}t=t._item.parent}return n},Us=80,hi=0,Qr=class{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=hi++}},ld=e=>{e.timestamp=hi++},Ts=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=hi++},dd=(e,t,n)=>{if(e.length>=Us){let r=e.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return Ts(r,t,n),r}else{let r=new Qr(t,n);return e.push(r),r}},Kn=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;let n=e._searchMarker.length===0?null:e._searchMarker.reduce((o,s)=>ee(t-o.index)<ee(t-s.index)?o:s),r=e._start,i=0;for(n!==null&&(r=n.p,i=n.index,ld(n));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&ee(n.index-i)<r.parent.length/Us?(Ts(n,r,i),n):dd(e._searchMarker,r,i)},Ge=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){let i=e[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=mt(t,i.index+n))}};var Xn=(e,t,n)=>{let r=e,i=t.changedParentTypes;for(;ct(i,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Ss(r._eH,n,t)},R=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=cs(),this._dEH=cs(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw et()}clone(){throw et()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){as(this._eH,t)}observeDeep(t){as(this._dEH,t)}unobserve(t){ls(this._eH,t)}unobserveDeep(t){ls(this._dEH,t)}toJSON(){}},Ds=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t,i=[],o=e._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){let s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let c=t;c<s.length&&r>0;c++)i.push(s[c]),r--;t=0}}o=o.right}return i},Ns=e=>{let t=[],n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){let r=n.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}n=n.right}return t};var ze=(e,t)=>{let n=0,r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],n++,e)}r=r.right}},Os=(e,t)=>{let n=[];return ze(e,(r,i)=>{n.push(t(r,i,e))}),n},ud=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}let i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Ms=(e,t)=>{let n=Kn(e,t),r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Gn=(e,t,n,r)=>{let i=n,o=e.doc,s=o.clientID,c=o.store,l=n===null?t._start:n.right,f=[],a=()=>{f.length>0&&(i=new $(U(s,j(c,s)),i,i&&i.lastId,l,l&&l.id,t,null,new fe(f)),i.integrate(e,0),f=[])};r.forEach(u=>{if(u===null)f.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:f.push(u);break;default:switch(a(),u.constructor){case Uint8Array:case ArrayBuffer:i=new $(U(s,j(c,s)),i,i&&i.lastId,l,l&&l.id,t,null,new He(new Uint8Array(u))),i.integrate(e,0);break;case At:i=new $(U(s,j(c,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Ye(u)),i.integrate(e,0);break;default:if(u instanceof R)i=new $(U(s,j(c,s)),i,i&&i.lastId,l,l&&l.id,t,null,new bt(u)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),a()},Ls=dt("Length exceeded!"),Rs=(e,t,n,r)=>{if(n>t._length)throw Ls;if(n===0)return t._searchMarker&&Ge(t._searchMarker,n,r.length),Gn(e,t,null,r);let i=n,o=Kn(t,n),s=t._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Tt(e,U(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Ge(t._searchMarker,i,r.length),Gn(e,t,s,r)},fd=(e,t,n)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return Gn(e,t,i,n)},Bs=(e,t,n,r)=>{if(r===0)return;let i=n,o=r,s=Kn(t,n),c=t._start;for(s!==null&&(c=s.p,n-=s.index);c!==null&&n>0;c=c.right)!c.deleted&&c.countable&&(n<c.length&&Tt(e,U(c.id.client,c.id.clock+n)),n-=c.length);for(;r>0&&c!==null;)c.deleted||(r<c.length&&Tt(e,U(c.id.client,c.id.clock+r)),c.delete(e),r-=c.length),c=c.right;if(r>0)throw Ls;t._searchMarker&&Ge(t._searchMarker,i,-o+r)},zn=(e,t,n)=>{let r=t._map.get(n);r!==void 0&&r.delete(e)},gi=(e,t,n,r)=>{let i=t._map.get(n)||null,o=e.doc,s=o.clientID,c;if(r==null)c=new fe([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c=new fe([r]);break;case Uint8Array:c=new He(r);break;case At:c=new Ye(r);break;default:if(r instanceof R)c=new bt(r);else throw new Error("Unexpected content type")}new $(U(s,j(o.store,s)),i,i&&i.lastId,null,null,t,n,c).integrate(e,0)},mi=(e,t)=>{let n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Ps=e=>{let t={};return e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Vs=(e,t)=>{let n=e._map.get(t);return n!==void 0&&!n.deleted};var Nn=e=>rs(e.entries(),t=>!t[1].deleted),ti=class extends de{constructor(t,n){super(t,n),this._transaction=n}},qn=class e extends R{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){let n=new e;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new e}clone(){let t=new e;return t.insert(0,this.toArray().map(n=>n instanceof R?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),Xn(this,t,new ti(this,t))}insert(t,n){this.doc!==null?M(this.doc,r=>{Rs(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?M(this.doc,n=>{fd(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?M(this.doc,r=>{Bs(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return Ms(this,t)}toArray(){return Ns(this)}slice(t=0,n=this.length){return Ds(this,t,n)}toJSON(){return this.map(t=>t instanceof R?t.toJSON():t)}map(t){return Os(this,t)}forEach(t){ze(this,t)}[Symbol.iterator](){return ud(this)}_write(t){t.writeTypeRef(Od)}},pd=e=>new qn,ei=class extends de{constructor(t,n,r){super(t,n),this.keysChanged=r}},Jt=class e extends R{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new e}clone(){let t=new e;return this.forEach((n,r)=>{t.set(r,n instanceof R?n.clone():n)}),t}_callObserver(t,n){Xn(this,t,new ei(this,t,n))}toJSON(){let t={};return this._map.forEach((n,r)=>{if(!n.deleted){let i=n.content.getContent()[n.length-1];t[r]=i instanceof R?i.toJSON():i}}),t}get size(){return[...Nn(this._map)].length}keys(){return Tn(Nn(this._map),t=>t[0])}values(){return Tn(Nn(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Tn(Nn(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?M(this.doc,n=>{zn(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?M(this.doc,r=>{gi(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return mi(this,t)}has(t){return Vs(this,t)}clear(){this.doc!==null?M(this.doc,t=>{this.forEach(function(n,r,i){zn(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Md)}},hd=e=>new Jt,Et=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Oo(e,t),qe=class{constructor(t,n,r,i){this.left=t,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&nt(),this.right.content.constructor){case B:this.right.deleted||ge(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}},hs=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case B:t.right.deleted||ge(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Tt(e,U(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},On=(e,t,n)=>{let r=new Map,i=Kn(t,n);if(i){let o=new qe(i.p.left,i.p,i.index,r);return hs(e,o,n-i.index)}else{let o=new qe(null,t._start,0,r);return hs(e,o,n)}},Fs=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===B&&Et(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let i=e.doc,o=i.clientID;r.forEach((s,c)=>{let l=n.left,f=n.right,a=new $(U(o,j(i.store,o)),l,l&&l.lastId,f,f&&f.id,t,null,new B(c,s));a.integrate(e,0),n.right=a,n.forward()})},ge=(e,t)=>{let{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},js=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===B&&Et(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},$s=(e,t,n,r)=>{let i=e.doc,o=i.clientID,s=new Map;for(let c in r){let l=r[c],f=n.currentAttributes.get(c)||null;if(!Et(f,l)){s.set(c,f);let{left:a,right:u}=n;n.right=new $(U(o,j(i.store,o)),a,a&&a.lastId,u,u&&u.id,t,null,new B(c,l)),n.right.integrate(e,0),n.forward()}}return s},Jr=(e,t,n,r,i)=>{n.currentAttributes.forEach((d,p)=>{i[p]===void 0&&(i[p]=null)});let o=e.doc,s=o.clientID;js(n,i);let c=$s(e,t,n,i),l=r.constructor===String?new yt(r):r instanceof R?new bt(r):new Wt(r),{left:f,right:a,index:u}=n;t._searchMarker&&Ge(t._searchMarker,n.index,l.getLength()),a=new $(U(s,j(o.store,s)),f,f&&f.lastId,a,a&&a.id,t,null,l),a.integrate(e,0),n.right=a,n.index=u,n.forward(),Fs(e,t,n,c)},gs=(e,t,n,r,i)=>{let o=e.doc,s=o.clientID;js(n,i);let c=$s(e,t,n,i);t:for(;n.right!==null&&(r>0||c.size>0&&(n.right.deleted||n.right.content.constructor===B));){if(!n.right.deleted)switch(n.right.content.constructor){case B:{let{key:l,value:f}=n.right.content,a=i[l];if(a!==void 0){if(Et(a,f))c.delete(l);else{if(r===0)break t;c.set(l,f)}n.right.delete(e)}else n.currentAttributes.set(l,f);break}default:r<n.right.length&&Tt(e,U(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new $(U(s,j(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new yt(l)),n.right.integrate(e,0),n.forward()}Fs(e,t,n,c)},Gs=(e,t,n,r,i)=>{let o=t,s=q();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===B){let f=o.content;s.set(f.key,f)}o=o.right}let c=0,l=!1;for(;t!==o;){if(n===t&&(l=!0),!t.deleted){let f=t.content;switch(f.constructor){case B:{let{key:a,value:u}=f,d=r.get(a)||null;(s.get(a)!==f||d===u)&&(t.delete(e),c++,!l&&(i.get(a)||null)===u&&d!==u&&(d===null?i.delete(a):i.set(a,d))),!l&&!t.deleted&&ge(i,f);break}}}t=t.right}return c},gd=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===B){let r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},md=e=>{let t=0;return M(e.doc,n=>{let r=e._start,i=e._start,o=q(),s=bn(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case B:ge(s,i.content);break;default:t+=Gs(n,r,i,o,s),o=bn(s),r=i;break}i=i.right}}),t},wd=e=>{let t=new Set,n=e.doc;for(let[r,i]of e.afterState.entries()){let o=e.beforeState.get(r)||0;i!==o&&Es(e,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===B&&s.constructor!==H&&t.add(s.parent)})}M(n,r=>{ws(e,e.deleteSet,i=>{if(i instanceof H||!i.parent._hasFormatting||t.has(i.parent))return;let o=i.parent;i.content.constructor===B?t.add(o):gd(r,i)});for(let i of t)md(i)})},ms=(e,t,n)=>{let r=n,i=bn(t.currentAttributes),o=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case bt:case Wt:case yt:n<t.right.length&&Tt(e,U(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&Gs(e,o,t.right,i,t.currentAttributes);let s=(t.left||t.right).parent;return s._searchMarker&&Ge(s._searchMarker,t.index,-r+n),t},ni=class extends de{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){let t=this.target.doc,n=[];M(t,r=>{let i=new Map,o=new Map,s=this.target._start,c=null,l={},f="",a=0,u=0,d=()=>{if(c!==null){let p=null;switch(c){case"delete":u>0&&(p={delete:u}),u=0;break;case"insert":(typeof f=="object"||f.length>0)&&(p={insert:f},i.size>0&&(p.attributes={},i.forEach((h,g)=>{h!==null&&(p.attributes[g]=h)}))),f="";break;case"retain":a>0&&(p={retain:a},No(l)||(p.attributes=To({},l))),a=0;break}p&&n.push(p),c=null}};for(;s!==null;){switch(s.content.constructor){case bt:case Wt:this.adds(s)?this.deletes(s)||(d(),c="insert",f=s.content.getContent()[0],d()):this.deletes(s)?(c!=="delete"&&(d(),c="delete"),u+=1):s.deleted||(c!=="retain"&&(d(),c="retain"),a+=1);break;case yt:this.adds(s)?this.deletes(s)||(c!=="insert"&&(d(),c="insert"),f+=s.content.str):this.deletes(s)?(c!=="delete"&&(d(),c="delete"),u+=s.length):s.deleted||(c!=="retain"&&(d(),c="retain"),a+=s.length);break;case B:{let{key:p,value:h}=s.content;if(this.adds(s)){if(!this.deletes(s)){let g=i.get(p)||null;Et(g,h)?h!==null&&s.delete(r):(c==="retain"&&d(),Et(h,o.get(p)||null)?delete l[p]:l[p]=h)}}else if(this.deletes(s)){o.set(p,h);let g=i.get(p)||null;Et(g,h)||(c==="retain"&&d(),l[p]=g)}else if(!s.deleted){o.set(p,h);let g=l[p];g!==void 0&&(Et(g,h)?g!==null&&s.delete(r):(c==="retain"&&d(),h===null?delete l[p]:l[p]=h))}s.deleted||(c==="insert"&&d(),ge(i,s.content));break}}s=s.right}for(d();n.length>0;){let p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}},Je=class e extends R{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new e}clone(){let t=new e;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);let r=new ni(this,t,n);Xn(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===yt&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?M(this.doc,r=>{let i=new qe(null,this._start,0,new Map);for(let o=0;o<t.length;o++){let s=t[o];if(s.insert!==void 0){let c=!n&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof c!="string"||c.length>0)&&Jr(r,this,i,c,s.attributes||{})}else s.retain!==void 0?gs(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&ms(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){let i=[],o=new Map,s=this.doc,c="",l=this._start;function f(){if(c.length>0){let u={},d=!1;o.forEach((h,g)=>{d=!0,u[g]=h});let p={insert:c};d&&(p.attributes=u),i.push(p),c=""}}let a=()=>{for(;l!==null;){if(Pe(l,t)||n!==void 0&&Pe(l,n))switch(l.content.constructor){case yt:{let u=o.get("ychange");t!==void 0&&!Pe(l,t)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(f(),o.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Pe(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(f(),o.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(f(),o.delete("ychange")),c+=l.content.str;break}case bt:case Wt:{f();let u={insert:l.content.getContent()[0]};if(o.size>0){let d={};u.attributes=d,o.forEach((p,h)=>{d[h]=p})}i.push(u);break}case B:Pe(l,t)&&(f(),ge(o,l.content));break}l=l.right}f()};return t||n?M(s,u=>{t&&Kr(u,t),n&&Kr(u,n),a()},"cleanup"):a(),i}insert(t,n,r){if(n.length<=0)return;let i=this.doc;i!==null?M(i,o=>{let s=On(o,this,t);r||(r={},s.currentAttributes.forEach((c,l)=>{r[l]=c})),Jr(o,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r={}){let i=this.doc;i!==null?M(i,o=>{let s=On(o,this,t);Jr(o,this,s,n,r)}):this._pending.push(()=>this.insertEmbed(t,n,r))}delete(t,n){if(n===0)return;let r=this.doc;r!==null?M(r,i=>{ms(i,On(i,this,t),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;let i=this.doc;i!==null?M(i,o=>{let s=On(o,this,t);s.right!==null&&gs(o,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?M(this.doc,n=>{zn(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?M(this.doc,r=>{gi(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return mi(this,t)}getAttributes(){return Ps(this)}_write(t){t.writeTypeRef(Ld)}},yd=e=>new Je,Ve=class{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===Jn||n.constructor===ue)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}},ue=class e extends R{constructor(){super(),this._prelimContent=[]}get firstChild(){let t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new e}clone(){let t=new e;return t.insert(0,this.toArray().map(n=>n instanceof R?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Ve(this,t)}querySelector(t){t=t.toUpperCase();let r=new Ve(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),at(new Ve(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Xn(this,t,new ri(this,n,t))}toString(){return Os(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){let i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),ze(this,o=>{i.insertBefore(o.toDOM(t,n,r),null)}),i}insert(t,n){this.doc!==null?M(this.doc,r=>{Rs(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)M(this.doc,r=>{let i=t&&t instanceof R?t._item:t;Gn(r,this,i,n)});else{let r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw dt("Reference item not found");r.splice(i,0,...n)}}delete(t,n=1){this.doc!==null?M(this.doc,r=>{Bs(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return Ns(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Ms(this,t)}slice(t=0,n=this.length){return Ds(this,t,n)}forEach(t){ze(this,t)}_write(t){t.writeTypeRef(Bd)}},bd=e=>new ue,Jn=class e extends ue{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){let t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){let t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new e(this.nodeName)}clone(){let t=new e(this.nodeName),n=this.getAttributes();return Do(n,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof R?r.clone():r)),t}toString(){let t=this.getAttributes(),n=[],r=[];for(let c in t)r.push(c);r.sort();let i=r.length;for(let c=0;c<i;c++){let l=r[c];n.push(l+'="'+t[l]+'"')}let o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?M(this.doc,n=>{zn(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?M(this.doc,r=>{gi(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return mi(this,t)}hasAttribute(t){return Vs(this,t)}getAttributes(){return Ps(this)}toDOM(t=document,n={},r){let i=t.createElement(this.nodeName),o=this.getAttributes();for(let s in o){let c=o[s];typeof c=="string"&&i.setAttribute(s,c)}return ze(this,s=>{i.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(Rd),t.writeKey(this.nodeName)}},xd=e=>new Jn(e.readKey()),ri=class extends de{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},ii=class e extends Jt{constructor(t){super(),this.hookName=t}_copy(){return new e(this.hookName)}clone(){let t=new e(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){let i=n[this.hookName],o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(Pd),t.writeKey(this.hookName)}},_d=e=>new ii(e.readKey()),oi=class e extends Je{get nextSibling(){let t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){let t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new e}clone(){let t=new e;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){let i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{let n=[];for(let i in t.attributes){let o=[];for(let s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,c)=>s.key<c.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){let o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){let c=o.attrs[s];r+=` ${c.key}="${c.value}"`}r+=">"}r+=t.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Vd)}},kd=e=>new oi,We=class{constructor(t,n){this.id=t,this.length=n}get deleted(){throw et()}mergeWith(t){return!1}write(t,n,r){throw et()}integrate(t,n){throw et()}},vd=0,H=class extends We{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Cs(t.doc.store,this)}write(t,n){t.writeInfo(vd),t.writeLen(this.length-n)}getMissing(t,n){return null}},He=class e{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new e(this.content)}splice(t){throw et()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}},Sd=e=>new He(e.readBuf()),Wn=class e{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new e(this.len)}splice(t){let n=new e(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Rn(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}},Cd=e=>new Wn(e.readLen()),zs=(e,t)=>new At({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1}),Ye=class e{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;let n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new e(zs(this.doc.guid,this.opts))}splice(t){throw et()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}},Ed=e=>new Ye(zs(e.readString(),e.readAny())),Wt=class e{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new e(this.embed)}splice(t){throw et()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}},Id=e=>new Wt(e.readJSON()),B=class e{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new e(this.key,this.value)}splice(t){throw et()}mergeWith(t){return!1}integrate(t,n){let r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}},Ad=e=>new B(e.readKey(),e.readJSON()),si=class e{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new e(this.arr)}splice(t){let n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){let r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){let o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}},Ud=e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++){let i=e.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new si(n)},fe=class e{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new e(this.arr)}splice(t){let n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){let r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){let o=this.arr[i];t.writeAny(o)}}getRef(){return 8}},Td=e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new fe(n)},yt=class e{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new e(this.str)}splice(t){let n=new e(this.str.slice(t));this.str=this.str.slice(0,t);let r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}},Dd=e=>new yt(e.readString()),Nd=[pd,hd,yd,xd,bd,_d,kd],Od=0,Md=1,Ld=2,Rd=3,Bd=4,Pd=5,Vd=6,bt=class e{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new e(this.type._copy())}splice(t){throw et()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}},Fd=e=>new bt(Nd[e.readTypeRef()](e));var Hn=(e,t,n)=>{let{client:r,clock:i}=t.id,o=new $(U(r,i+n),t,U(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=U(t.redone.client,t.redone.clock+n)),t.right=o,o.right!==null&&(o.right.left=o),e._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=n,o};var $=class e extends We{constructor(t,n,r,i,o,s,c,l){super(t,l.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=c,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(t){(this.info&8)>0!==t&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(t){this.keep!==t&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(t){this.deleted!==t&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=j(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=j(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===It&&this.id.client!==this.parent.client&&this.parent.clock>=j(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ds(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Tt(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===H||this.right&&this.right.constructor===H)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===e&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===e&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===It){let r=qr(n,this.parent);r.constructor===H?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=ds(t,t.doc.store,U(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),Dn(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Dn(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(qr(t.doc.store,i.origin)))o.has(qr(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Cs(t.doc.store,this),this.content.integrate(t,this),fs(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new H(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:U(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Dn(t.origin,this.lastId)&&this.right===t&&Dn(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){let n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){let n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Rn(t.deleteSet,this.id.client,this.id.clock,this.length),fs(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw nt();this.content.gc(t),n?Ql(t,this,new H(this.id,this.length)):this.content=new Wn(this.length)}write(t,n){let r=n>0?U(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(o===null?0:32);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){let c=this.parent;if(c._item!==void 0){let l=c._item;if(l===null){let f=Kl(c);t.writeParentInfo(!0),t.writeString(f)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else c.constructor===String?(t.writeParentInfo(!0),t.writeString(c)):c.constructor===It?(t.writeParentInfo(!1),t.writeLeftID(c)):nt();o!==null&&t.writeString(o)}this.content.write(t,n)}},qs=(e,t)=>jd[t&31](e),jd=[()=>{nt()},Cd,Ud,Sd,Dd,Id,Ad,Fd,Td,Ed,()=>{nt()}],$d=10,Y=class extends We{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){nt()}write(t,n){t.writeInfo($d),I(t.restEncoder,this.length-n)}getMissing(t,n){return null}},Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Ws="__ $YJS$ __";Js[Ws]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Js[Ws]=!0;var wi=T(kr()),Zn=(e,t,n)=>{let r=(n||0)+1;if(t?t(e)&&(e.id=(0,wi.createId)()):e.id=(0,wi.createId)(),e.type==="item"&&e.component&&e.component.id&&e.component.props)for(let i of Object.values(e.component.props))i.meta?.type==="content-element"&&i.content&&Zn(i.content,t,r);if(e.type!=="text"&&e.childs&&Array.isArray(e.childs))for(let i of e.childs)Zn(i,t,r);return e};var Ke=(e,t)=>{let n=t||new Set;if(!e)return n;if(e.type==="item"&&e.component?.id&&(n.add(e.component.id),e.component.props))for(let r of Object.values(e.component.props))r.meta?.type==="content-element"&&r.content&&Ke(r.content,n);if(e.type!=="text"&&e.childs)for(let r of e.childs)Ke(r,n);return n},Dt=async(e,t)=>{let n=new Set,r=null;typeof t!="string"?r=t:e.comps.pending[t]?await e.comps.pending[t]:(Ys(e,t),r=(await e.comps.pending[t]).content_tree),Ke(r,n);let i=[...n].filter(o=>{if(e.prod){if(!e.comps.all[o]&&!e.comps.pending[o])return!0}else if(!e.comps.doc[o]&&!e.comps.pending[o])return!0;return!1}).map(async o=>{let s=await Ys(e,o);return await Dt(e,s.content_tree),s});i.length>0&&await Promise.all(i)},Ys=(e,t)=>e.loader.comp(e,t),yi=(e,t,n,r)=>{let i=t.component,o=null,s={};if(n.type==="m"){let f=n.item;s=f.get("component")?.get("props")?.toJSON(),s||(f.get("component")?.set("props",new Jt),s=f.get("component")?.get("props")?.toJSON()),o=f.toJSON()}else o=structuredClone(n.item.content_tree),s=o.component.props||{};let c={};c=Zn(o,f=>{f.originalId||(f.originalId=f.id);let a=f.id;return r[f.originalId]?a=r[f.originalId]:a=(0,Ks.createId)(),f.id=a,r[f.originalId]=a,!1});let l={};for(let[f,a]of Object.entries(s))l[f]=a,i.props[f]&&(l[f].value=i.props[f].value,l[f].valueBuilt=i.props[f].valueBuilt,l[f].content=i.props[f].content);return{...c,id:t.id,originalId:t.originalId||c.originalId,component:{...i,props:l}}};var _i=T(ec()),ht=T(nc());var er=async(e,t)=>{let n=e.treeMeta;await Promise.all(Object.values(e.page?.content_tree.childs||{}).map(async(r,i)=>{await Xe(e,{treeMeta:n,item:r,parent_id:"root",idx:i})})||[]),t.render!==!1&&e.render()},Xe=async(e,t)=>{let n=t.treeMeta,r=t.item;if(t.parent_comp){let i=t.parent_comp.comp?.child_ids;i&&r.originalId&&i[r.originalId]&&(r.id=i[r.originalId])}if(r){let i;r.type==="item"&&r.component?.id&&(i={id:r.component.id,child_ids:{},mcomp:e.prod?void 0:e.comps.doc[r.component.id]?.getMap("map").get("content_tree")});let o={item:r,parent_id:t.parent_id,parent_comp:t.parent_comp,className:yn(r,{mode:e.mode}),comp:i};if(n[o.item.id]=o,r.type==="item"&&r.component?.id){let s=r.component.id;if(e.prod){let c=e.comps.all[s];if(c||(await Dt(e,s),c=e.comps.all[s]),c){e.compInstance[r.id]||(e.compInstance[r.id]={});let l=e.compInstance[r.id],f=yi(e,r,{type:"i",item:c},l);for(let[d,p]of Object.entries(f))d!=="id"&&(r[d]=p);let a=c.content_tree.component?.props,u=r.component.props;if(a&&u)for(let[d,p]of Object.entries(a)){let h=u[d];h&&p.meta?.type==="content-element"&&h.content&&await Xe(e,{treeMeta:n,item:p.content,parent_id:r.id,parent_comp:t.parent_comp,idx:p.idx})}}}else{let c=e.comps.doc[s];if(c||(await Dt(e,s),c=e.comps.doc[s]),c){let l=c.getMap("map").get("content_tree");if(l){e.compInstance[r.id]||(e.compInstance[r.id]={});let a=e.compInstance[r.id],u=yi(e,r,{type:"m",item:l},a);for(let[d,p]of Object.entries(u))d!=="id"&&(r[d]=p);o.comp={id:s,mcomp:l,child_ids:a}}let f=Object.entries(r.component?.props||{}).sort((a,u)=>a[1].idx-u[1].idx);if(l){let a=l.get("component")?.get("props"),u=r.component.props;if(a&&u)for(let[d,p]of f){let h=a.get(d);if(h){let g=h?.toJSON(),S=u[d];S&&g.meta?.type==="content-element"&&S.content&&await Xe(e,{treeMeta:n,item:p.content,parent_id:r.id,parent_comp:t.parent_comp,idx:g.idx})}}}}}await Promise.all(r.childs.map(async(c,l)=>await Xe(e,{treeMeta:n,item:c,parent_comp:o,parent_id:r.id,idx:l})))}else r.type!=="text"&&Array.isArray(r.childs)&&await Promise.all(r.childs.map(async(s,c)=>await Xe(e,{treeMeta:n,idx:c,item:s,parent_comp:t.parent_comp,parent_id:r.id||""})))}};var nr=async e=>new Promise(async t=>{let n=new URL(serverurl);if(n.protocol=n.protocol.startsWith("http:")?"ws:":"wss:",e.wsRetry.localIP&&["localhost","127.0.0.1"].includes(n.hostname)){let i=await api.local_ip();n.hostname=i[0]}if(n.pathname="/edit",e.ws&&e.ws.readyState===e.ws.OPEN){t();return}e.ws=new WebSocket(n);let r=e.ws;if(r){let i=o=>{e.wsRetry.disabled||(e.wsRetry.reconnecting=!0,e.wsRetry.localIP=!0,e.wsRetry.fast?nr(e):setTimeout(()=>{console.log("Reconnecting..."),nr(e)},2e3))};r.addEventListener("error",i),r.addEventListener("close",i),r.addEventListener("open",()=>{e.wsRetry.reconnecting&&(e.wsRetry.reconnecting=!1,console.log("Connected")),t()}),r.addEventListener("message",async o=>{let s=JSON.parse(o.data);switch(s.type){case"get_page":break;case"set_page":e.mpage&&e.mpage.destroy(),e.mpage=await au(s),e.mpage.on("update",(0,_i.default)((c,l)=>{e.mpage&&(e.page=e.mpage.getMap("map").toJSON(),console.clear(),console.log(`\u{1F525} Page updated: ${e.page?.url} ${new Date().toLocaleString()}`))})),e.page=e.mpage.getMap("map").toJSON(),e.mpageLoaded&&(e.mpageLoaded(e.mpage),e.mpageLoaded=null);break;case"sv_local":su({p:e,bin:Ze(s.sv_local),msg:s});break;case"svd_remote":cu({p:e,bin:Ze(s.diff_remote),msg:s}),e.treeMeta={},er(e,{note:"page-changed"});break;case"diff_local":s.mode==="page"&&he(e.mpage,Ze(s.diff_local),"remote"),s.mode==="comp"&&he(e.comps.doc[s.id],Ze(s.diff_local),"remote");break;case"set_comp":{let c=e.comps.resolve[s.comp_id];if(c){e.comps.doc[s.comp_id]=new At,he(e.comps.doc[s.comp_id],Ze(s.changes),"remote"),setTimeout(()=>{e.comps.doc[s.comp_id].on("update",(0,_i.default)((a,u)=>{if(u==="remote")return;let d=e.comps.doc[s.comp_id];if(d&&!u&&u!=="updated_at"){let p=d.getMap("map").get("id");if(p){d.transact(()=>{d.getMap("map").set("updated_at",new Date().toISOString())},"updated_at");let h={type:"sv_local",mode:"comp",id:p,sv_local:(0,ht.compress)(fi(d).toString())};Qe(e,JSON.stringify(h))}}},200))},500);let l=e.comps.doc[s.comp_id].getMap("map").get("content_tree")?.toJSON();Ke(l,new Set),c(e.comps.doc[s.comp_id].getMap("map").toJSON()),delete e.comps.pending[s.comp_id],delete e.comps.resolve[s.comp_id]}}break;case"sitejs_reload":if(s.js){e.site.js=s.js;let c=(a,u)=>e?(e.script.api||(e.script.api=_t(e.site.api_url)),e.script.db||(e.script.db=kt(e.site.api_url)),u.db=e.script.db,u.api=e.script.api,new Function(...Object.keys(u),a)(...Object.values(u))):null,l=window,f={types:{},exports:l.exports,load:Lt,render:e.render,module:{exports:{}}};if(e.status="init",console.log(`\u{1F525} Site JS Reloaded: ${new Date().toLocaleString()}`),c(e.site.js,f),f.module.exports)for(let[a,u]of Object.entries(f.module.exports))l.exports[a]=u;e.render()}break;case"undo":case"redo":case"new_comp":case"get_comp":}}),r.addEventListener("open",()=>{e.wsRetry.disabled=!1})}}),Ze=e=>Uint8Array.from((0,ht.decompress)(e).split(",").map(t=>parseInt(t,10))),su=async e=>{let{bin:t,msg:n,p:r}=e,{id:i,mode:o,type:s}=n,c=null;if(o==="page"&&(c=r.mpage),o==="comp"&&(c=r.comps.doc[i]),!c)return;let l=ui(c,t),f=fi(c),a={diff_remote:(0,ht.compress)(l.toString()),sv_remote:(0,ht.compress)(f.toString()),id:i,mode:o,type:s};await Qe(r,JSON.stringify(a))},cu=async e=>{let{bin:t,msg:n,p:r}=e,{id:i,mode:o,type:s}=n,c=Uint8Array.from((0,ht.decompress)(n.sv_remote).split(",").map(u=>parseInt(u,10))),l=Uint8Array.from((0,ht.decompress)(n.diff_remote).split(",").map(u=>parseInt(u,10))),f=async u=>{let d=ui(u,c);he(u,l,"local");let p={type:"diff_local",mode:n.mode,id:n.id,diff_local:(0,ht.compress)(d.toString())};await Qe(r,JSON.stringify(p))},a=null;o==="page"&&(a=r.mpage),o==="comp"&&(a=r.comps.doc[i]),a&&f(a)},Qe=async(e,t)=>{let n=e.ws;n&&(n.readyState!==n.OPEN&&await new Promise(r=>{let i=setInterval(()=>{n.readyState===n.OPEN&&(clearInterval(i),r())},50)}),n.send(t))},au=async e=>{let t=Uint8Array.from((0,ht.decompress)(e.changes).split(",").map(r=>parseInt(r,10))),n=new At;return he(n,t,"remote"),n};var ki={},sc=(e,t)=>{if(e.status!=="loading"){let n="";if(Mt(t.substring(1)))n=t.substring(1);else{let r=e.route.lookup(t);if(!r)e.status="not-found";else{if(r.params)for(let[i,o]of Object.entries(r.params))ho.params[i]=o;n=r.id}}if(n){window.prasiPageID=n;let r=[];n!==e.page?.id&&(e.page&&(ki[e.page.id]=e.treeMeta),e.page=e.pages[n],e.page&&ki[e.page.id]?e.treeMeta=ki[e.page.id]:(r.push(lu(e,n)),e.treeMeta={})),!e.page||!e.page.content_tree?(e.status="loading",e.prod?r.push(ic(e,n)):r.push(oc(e,n))):e.prod?ic(e,n):oc(e,n),r.length>0?Promise.all(r).then(async()=>{await rc(e),e.status="ready",e.render()}):rc(e)}}},rc=async e=>{e.page?(er(e,{render:!1,note:"render",reset:!1}),e.status="ready"):e.status="not-found"},cc=async(e,t)=>{let n=e.route.lookup(t);if(n&&!e.pages[n.id]&&!e.pagePreload[n.id]){e.pagePreload[n.id]=!0;let r=await e.loader.page(e,n.id);if(r){e.pages[r.id]=r;let i=e.pages[r.id];i&&i.content_tree&&await Dt(e,i.content_tree),delete e.pagePreload[n.id]}}},lu=async(e,t)=>{try{typeof window.exports>"u"&&(window.exports={}),await Lt(e.loader.npm(e,"page",t))}catch(n){console.error(n)}},vi={},ic=async(e,t)=>{vi[t]||(vi[t]=e.loader.page(e,t));let n=await vi[t];if(n){e.pages[n.id]={id:n.id,url:n.url,name:n.name,content_tree:n.content_tree,js:n.js_compiled};let r=e.pages[n.id];r&&r.content_tree&&await Dt(e,r.content_tree)}},oc=(e,t)=>new Promise(async n=>{await nr(e),e.mpageLoaded=async r=>{let i=r.getMap("map").toJSON();e.pages[i.id]={id:i.id,url:i.url,name:i.name,content_tree:i.content_tree,js:i.js_compiled};let o=e.pages[i.id];o&&o.content_tree&&await Dt(e,o.content_tree),n()},Qe(e,JSON.stringify({type:"get_page",page_id:t}))});var en=T(_e());var P=T(_e()),Si=class extends P.Component{displayName="ReactUseErrorBoundary";componentDidCatch(...t){this.setState({}),this.props.onError(...t)}render(){return this.props.children}},du=()=>!1,ac=(0,P.createContext)({componentDidCatch:{current:void 0},error:void 0,setError:du});function lc({children:e}){let[t,n]=(0,P.useState)(),r=(0,P.useRef)(),i=(0,P.useMemo)(()=>({componentDidCatch:r,error:t,setError:n}),[t]);return P.default.createElement(ac.Provider,{value:i},P.default.createElement(Si,{error:t,onError:(o,s)=>{n(o),r.current?.(o,s)}},e))}lc.displayName="ReactUseErrorBoundaryContext";function dc(e){function t(n){return P.default.createElement(lc,null,P.default.createElement(e,{key:"WrappedComponent",...n}))}return t.displayName=`WithErrorBoundary(${e.displayName??e.name??"Component"})`,t}function uc(e){let t=(0,P.useContext)(ac);t.componentDidCatch.current=e;let n=(0,P.useCallback)(()=>{t.setError(void 0)},[]);return[t.error,n]}var Q=T(L()),fc=dc(({children:e,id:t})=>{let n=pn({retrying:!1}),[r,i]=uc((o,s)=>{console.warn(o)});return r?(0,Q.jsxs)("div",{className:"bg-red-100 border border-red-300 rounded-sm text-xs flex flex-col items-center",children:[(0,Q.jsx)("div",{className:"text-[10px] font-bold text-red-900 self-stretch px-1",children:"ERROR"}),(0,Q.jsx)("p",{className:"border-b border-red-300 px-1 pb-1 min-w-[100px]",children:n.retrying?(0,Q.jsx)(Q.Fragment,{children:"Retrying..."}):(0,Q.jsx)(Q.Fragment,{children:r.message})}),(0,Q.jsx)("div",{className:"p-1",children:(0,Q.jsx)("button",{onClick:()=>{n.retrying=!0,n.render(),setTimeout(()=>{n.retrying=!1,n.render(),i()},100)},className:"bg-white border border-white hover:border-red-400 hover:bg-red-50 rounded px-2",children:"Try again"})})]}):e});var rr=T(L());var Ci=(e,t,n,r)=>{let i=t.className,o=t.item,s=o.adv,c={};try{t.memoize||(t.memoize={Local:fu(e,t),PassProp:uu(e,t)}),e.script.db||(e.script.db=kt(e.site.api_url)),e.script.api||(e.script.api=_t(e.site.api_url));let l=window,f=ir(e,t);for(let[p,h]of Object.entries(f))if(h&&typeof h=="object"){let g=h;g._jsx&&g.Comp&&(f[p]=(0,rr.jsx)(g.Comp,{parent_id:t.item.id}))}let a={jsx:null};c={...l.exports,...f,...t.memoize,db:e.script.db,api:e.script.api,children:n,props:{className:i},useEffect:en.useEffect,render:p=>{a.jsx=(0,rr.jsx)(fc,{children:(0,rr.jsx)(en.Suspense,{children:p})})}};let d=new Function(...Object.keys(c),r)(...Object.values(c));return d instanceof Promise&&d.catch(p=>{console.warn(p),console.warn((`ERROR in ${o.type} [${o.name}]:
 `+(s?.js||"")).trim()),console.warn("Available var:",c,`

`)}),a.jsx}catch(l){console.warn(l),console.warn((`ERROR in ${o.type} [${o.name}]:
 `+(s?.js||"")).trim()),console.warn("Available var:",c,`

`)}},ir=(e,t,n)=>{t.scope||(t.scope={});let r=t,i={};for(;r;){let o=null;if(r.scopeAttached){for(let s of r.scopeAttached)if(s.value){for(let[c,l]of Object.entries(s.value))typeof i[c]>"u"&&(i[c]=l);if(n?.each&&!n.each(s.meta,s.value))break}}if(r.scope||r.comp?.propval){o={...r.scope,...r.comp?.propval};for(let[s,c]of Object.entries(o))typeof i[s]>"u"&&(i[s]=c);if(n?.each&&!n.each(r,o))break}r=e.treeMeta[r.parent_id]}return i},uu=(e,t)=>n=>{t.scope||(t.scope={});for(let[r,i]of Object.entries(n))r!=="children"&&(t.scope[r]=i);return n.children},tn={},fu=(e,t)=>({name:r,value:i,effect:o,children:s,hook:c,deps:l,cache:f})=>{t.scope||(t.scope={});let a=()=>{if(!t.scope[r])try{t.scope[r]={...Fi(i),render:()=>{t.render?t.render():e.render()}}}catch(u){console.warn(u)}};if(f===!1)a();else{let u=e.page?.id;u&&(tn[u]||(tn[u]={}),tn[u][t.item.originalId||t.item.id]?(t.scope[r]=tn[u][t.item.originalId||t.item.id],t.scope[r].render=()=>{t.render?t.render():e.render()}):(a(),tn[u][t.item.originalId||t.item.id]=t.scope[r]))}if(typeof c=="function")try{c(t.scope[r])}catch(u){console.warn(u)}return(0,en.useEffect)(()=>{if(o)try{o(t.scope[r])}catch(u){console.warn(u)}},l||[]),s};var nn=T(L()),Ei={},pc=(e,t,n)=>{if(t.item.type==="item"&&t.item.component){e.script.db||(e.script.db=kt(e.site.api_url)),e.script.api||(e.script.api=_t(e.site.api_url));let r=t.item.component.props,i=window,o=ir(e,t),s={...i.exports,...o,db:e.script.db,api:e.script.api},c={};for(let[l,f]of n){let a=r[l]||f,u=null;if(a.valueBuilt){let d=new Function(...Object.keys(s),`return ${a.valueBuilt}`);try{u=d(...Object.values(s))||null}catch(p){let h=t.item.name;console.warn(p),console.warn(`ERROR in Component [${h}], in prop [${l}]:
 `+a.value)}}if(a.meta?.type==="content-element"&&!(typeof u=="object"&&u&&u._jsx)){let d=`${t.item.id}-${l}`;Ei[d]||(Ei[d]={_jsx:!0,Comp:({parent_id:p})=>{if(a.content){let h=e.treeMeta[p],g=[];return ir(e,h,{each:(S,x)=>(g.push({meta:S,value:x}),!0)}),e.treeMeta[a.content.id].scopeAttached=g,(0,nn.jsx)(rn,{id:a.content.id,fromProp:!0})}return(0,nn.jsx)(nn.Fragment,{})}}),u=Ei[d]}c[l]=u}return c}};var Ii=T(L()),hc=({id:e,fromProp:t})=>(0,Ii.jsx)(me,{id:e,fromProp:t}),gc=({className:e,item:t,_children:n})=>(0,Ii.jsx)("div",{id:`text-${t.id}`,className:cx(e,css`
          outline: none;
          min-width: 3px !important;
          min-height: 10px !important;
        `),dangerouslySetInnerHTML:{__html:n||""}});var we=T(L()),me=({id:e,children:t})=>{let[n,r]=(0,mc.useState)({}),i=Xt(Zt,"LIVE"),o=i.treeMeta[e];if(!o)return null;o.render=()=>{r({})};let s=o.item;if(s.hidden)return null;if(o.comp?.id){let d=o.comp,p={},h={};o.comp.mcomp?(p=o.comp.mcomp.get("component")?.get("props")?.toJSON(),h=Object.entries(p).sort((g,S)=>g[1].idx-S[1].idx)):(p=structuredClone(i.comps.all[o.comp.id]?.content_tree.component?.props||{}),h=Object.entries(p)),d.propval=pc(i,o,h)}let c=null;t&&(s.type==="text"?c=t([]):c=t(s.childs||[])),o.className=yn(s,{mode:i.mode});let l=o.className,f=s.adv;if(!f?.js&&(o.scopeAttached||o.comp))return Ci(i,o,c,'render(React.createElement("div",{...props},children));');if(f){if(f.html){let d=pu(l,f);if(d)return d}else if(f.jsBuilt&&f.js)return Ci(i,o,c,f.jsBuilt)}let a=G(s,"linktag",i.mode,{}),u=s.type==="item"&&s.component?.id;if(a&&a.link&&!u){let d=a.link||"";if(d.startsWith("/")&&(cc(i,d),(location.pathname.startsWith("/preview/")||location.pathname.startsWith("/site/"))&&["localhost","127.0.0.1","prasi.app"].includes(location.hostname))){let h=location.pathname.split("/");h.length>=3&&(d=`/${h[1]}/${h[2]}${d}`)}let p={className:l,href:d,onClick:h=>{h.preventDefault(),d.startsWith("/")?navigate(d):location.href=d}};return s.type==="text"?(0,we.jsx)("a",{...p,dangerouslySetInnerHTML:{__html:s.html||s.text}}):(0,we.jsx)("a",{...p,children:c})}return s.type==="text"?(0,we.jsx)(gc,{className:l,item:s,p:i,_children:s.html||s.text},s.id):(0,we.jsx)("div",{className:l,children:c})},pu=(e,t)=>t.html?(0,we.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:t.html}}):null;var or=T(L()),rn=({id:e,fromProp:t})=>(0,or.jsx)(me,{id:e,fromProp:t,children:n=>n.map(r=>r.type==="item"?(0,or.jsx)(rn,{id:r.id,fromProp:t},r.id):(0,or.jsx)(hc,{id:r.id,fromProp:t},r.id))});var Ai=T(L()),wc=({id:e})=>(0,Ai.jsx)(me,{id:e,children:t=>t.map(n=>(0,Ai.jsx)(rn,{id:n.id},n.id))});var bc=T(_e());var z=T(L()),yc=window,xc=({children:e,className:t,show:n,backdrop:r,note:i,alt:o})=>{let s=pn({icon:(0,z.jsx)("div",{className:"px-4 py-1",children:"Loading..."}),value:.111,ival:null},()=>{});return(0,bc.useEffect)(()=>(s.ival=setInterval(()=>{s.value+=.1333,s.value>=1.3&&(s.value=0),s.render()},200),yc.loadingIcon&&(s.icon=(0,z.jsx)("img",{alt:"loading",src:yc.loadingIcon,className:css`
            width: 42px;
            height: 42px;
          `}),s.render()),()=>{clearInterval(s.ival)}),[]),(0,z.jsxs)(z.Fragment,{children:[r!==!1&&(0,z.jsx)("div",{className:cx("flex items-center z-40 bg-white pointer-events-none","w-full h-full fixed transition-all duration-1000",typeof n<"u"?n?"opacity-50":"opacity-0":"opacity-50"),onContextMenuCapture:c=>{c.preventDefault()}}),e?(0,z.jsx)("div",{onContextMenuCapture:c=>{c.preventDefault()},className:cx("flex flex-1 items-center justify-center z-40 transition-all",t||(r!==!1?"w-full h-full fixed":""),typeof n<"u"?n?"":"hidden":""),children:(0,z.jsx)("div",{className:"flex items-center justify-center flex-col space-y-3 bg-white p-4 rounded-lg select-none",children:(0,z.jsx)("div",{className:"text-sm",children:e})})}):(0,z.jsx)("div",{className:cx("flex flex-1 items-center justify-center z-40 pointer-events-none transition-all",t||(r!==!1?"w-full h-full fixed":""),typeof n<"u"?n?"":"hidden":""),children:(0,z.jsxs)("div",{className:cx("w-1/6 flex flex-col items-center justify-center",css`
                min-width: 30px;
                .pr-outer {
                  background: rgba(0, 0, 0, 0.1) !important;
                }
              `),children:[(0,z.jsx)("div",{className:"text-[10px] text-slate-400 whitespace-nowrap",children:i}),(0,z.jsx)("div",{className:"pr-outer w-full h-[3px] flex items-stretch rounded-sm overflow-hidden",children:(0,z.jsx)("div",{className:cx("bg-blue-800 transition-all duration-200 rounded-sm w-full",css`
                    transform: translate(${-100+s.value*200}%);
                  `)})}),o]})})]})};var on=T(L()),_c=()=>{let e=Xt(Zt,"LIVE"),t=e.mode,n=Object.values(e.page?.content_tree.childs||{}).map(r=>r.id);return(0,on.jsx)("div",{className:cx("relative flex flex-1 items-center justify-center"),children:(0,on.jsx)("div",{className:cx("absolute flex flex-col items-stretch flex-1 bg-white ",t==="mobile"?css`
                border-left: 1px solid #ccc;
                border-right: 1px solid #ccc;
                width: 375px;
                top: 0px;
                overflow-x: hidden;
                overflow-y: auto;
                bottom: 0px;
              `:"inset-0  overflow-auto",css`
            contain: content;
          `),children:e.status==="ready"||e.status==="tree-rebuild"?n?.map(r=>(0,on.jsx)(wc,{id:r},r)):(0,on.jsx)(xc,{})})})},zp=css`
  background-color: white;
  background-image: linear-gradient(45deg, #fafafa 25%, transparent 25%),
    linear-gradient(-45deg, #fafafa 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #fafafa 75%),
    linear-gradient(-45deg, transparent 75%, #fafafa 75%);

  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
`;var V=window,kc=async(e,t)=>{if(e.status==="init"){e.status="loading",V.isEditor=!1,V.isMobile=e.mode==="mobile",V.isDesktop=e.mode==="desktop",V.apiHeaders={},V.navigateOverride=r=>(r.startsWith("/")&&(V.basepath.length>1&&(r=`${V.basepath}${r}`),(location.hostname==="prasi.app"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="10.0.2.2")&&location.pathname.startsWith("/live")&&!r.startsWith("/live")&&(r=`/live/${location.pathname.split("/")[2]}${r}`)),r);let n=null;if(e.prod)n=await e.loader.site(e,Mt(t)?{id:t}:{domain:t});else{try{n=JSON.parse(localStorage.getItem(`prasi-site-${t}`)||"")}catch{}n?e.loader.site(e,Mt(t)?{id:t}:{domain:t}).then(r=>{localStorage.setItem(`prasi-site-${t}`,JSON.stringify(r))}):(n=await e.loader.site(e,Mt(t)?{id:t}:{domain:t}),localStorage.setItem(`prasi-site-${t}`,JSON.stringify(n)))}if(n){V.exports={},await Lt(e.loader.npm(e,"site",n.id)),e.site.id=n.id,e.site.js=n.js_compiled||"",e.site.responsive=n.responsive,e.prod?e.site.api_url=await gr(n.config,"prod"):(V.externalAPI={mode:localStorage.getItem(`prasi-ext-api-mode-${e.site.id}`)||"prod",devUrl:localStorage.getItem(`prasi-ext-dev-url-${e.site.id}`)||"",prodUrl:localStorage.getItem(`prasi-ext-prod-url-${e.site.id}`)||""},e.site.api_url=await gr(n.config),V.externalAPI.prodUrl!==e.site.api_url&&(V.externalAPI.prodUrl=e.site.api_url,localStorage.setItem(`prasi-ext-prod-url-${e.site.id}`,e.site.api_url)),V.externalAPI.mode==="dev"&&V.externalAPI.devUrl&&(e.site.api_url=V.externalAPI.devUrl,await ji(V.externalAPI.devUrl,"dev"))),V.apiurl=e.site.api_url;let r=[];if(e.prod)r=await e.loader.pages(e,n.id);else{let s=localStorage.getItem(`prasi-pages-[${t}]`);if(s)try{r=JSON.parse(s)}catch{}r.length===0?(r=await e.loader.pages(e,n.id),localStorage.setItem(`prasi-pages-[${t}]`,JSON.stringify(r))):e.loader.pages(e,n.id).then(c=>{localStorage.setItem(`prasi-pages-[${t}]`,JSON.stringify(c))})}let i=(s,c)=>e?(c.api=_t(e.site.api_url),c.db=kt(e.site.api_url),c.params=V.params,c.module={},new Function(...Object.keys(c),s)(...Object.values(c))):null,o={types:{},exports:V.exports,load:Lt,render:e.render,module:{exports:{}}};if(i(e.site.js,o),o.module.exports)for(let[s,c]of Object.entries(o.module.exports))V.exports[s]=c;if(e.route=hn({strictTrailingSlash:!0}),r&&r.length>0)for(let s of r)e.route.insert(s.url,s);e.status="ready",e.render()}else e.status="not-found",e.render()}};var Sc=T(L()),ih=({domain:e,pathname:t,loader:n,mode:r="dev"})=>{let i=Xt(Zt,"LIVE");if(i.loader=n,r==="prod"&&(i.prod=!0),i.site.id&&!i.mode&&i.site.responsive)if(i.site.responsive==="all"){let s=(0,vc.default)();i.mode=s.device.type==="mobile"?"mobile":"desktop",localStorage.getItem("prasi-editor-mode")&&(i.mode=localStorage.getItem("prasi-editor-mode"))}else i.site.responsive==="mobile-only"?i.mode="mobile":i.site.responsive==="desktop-only"&&(i.mode="desktop");let o=(0,sr.useCallback)(()=>{let s=i.mode;window.innerWidth<600?s="mobile":s="desktop",s!==i.mode&&(i.mode=s,i.render())},[i]);return(0,sr.useEffect)(()=>{i.site.id&&(window.removeEventListener("resize",o),i.site.responsive==="all"&&window.addEventListener("resize",o))},[i.site.responsive]),i.status==="init"&&kc(i,e),i.site.id&&sc(i,t),(0,Sc.jsx)(_c,{})};export{ih as Live};
//# sourceMappingURL=live-7CM7GPVL.js.map
